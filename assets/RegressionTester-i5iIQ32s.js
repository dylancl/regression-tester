import{u as le,j as e,m as Je,B as d,n as Ze,o as Oe,p as Te,q as $e,R as et,d as E,r as re,I as ce,K as tt,t as st,v as Be,w as We,h as pe,x as nt,y as it,E as He,z as rt,G as ot,H as at,S as ye,J as lt,N as dt,i as ct,O as ht,Q as qe,g as Ke,b as Ye,U as Ge,V as ut,W as Fe,X as pt,Y as ft,Z as Qe,_ as xt,P as Re,$ as mt,a0 as gt,a1 as bt,L as yt,a2 as jt,a3 as ze,a4 as Xe,a5 as kt,a6 as wt,a7 as vt,a8 as Ct,f as St,a9 as _t,aa as Rt,ab as Et,ac as It,ad as Tt,a as Ae,ae as zt,af as Pe,ag as Lt,ah as De,ai as Mt,M as Ot}from"./mui-B3MKZ-aL.js";import{r as w,h as $t,i as Ft}from"./vendor-By_F_pnL.js";import{c as G,p as At,g as Ce,a as Pt,b as Dt}from"./index-CgseieSn.js";import{d as Se,l as Ut,a as Nt,s as Bt,b as Ie,c as Ue,C as Wt,N as Ht,D as qt,F as Kt}from"./DeviceSizeMenu-CRul4MVU.js";import{f as Yt}from"./firestore-CvuUZNys.js";import{m as Gt,L as Qt,u as Xt}from"./index-kHsenwn3.js";import{A as Vt}from"./index-DSV94F9p.js";const Jt=()=>{const[n,l]=w.useState(Se),[j,o]=w.useState(0),[h,C]=w.useState(""),[z,D]=w.useState(null),[b,p]=w.useState(!0),[M,U]=w.useState(!0),[A,N]=w.useState(!1),[W,O]=w.useState({width:window.innerWidth-400,height:window.innerHeight-100,isResponsiveMode:!1}),[V,ee]=w.useState(!1),se=Object.keys(G)[j],oe=(a,r)=>{var P,B,H,Z,_,L,q,S;const g={...a},c=(P=G[r])==null?void 0:P.hasLexus,f=(B=G[r])==null?void 0:B.hasStock,u=((H=G[r])==null?void 0:H.hasUsed)!==!1;return g.brand==="lexus"&&!c&&(i(`Lexus is not available for ${(Z=G[r])==null?void 0:Z.pretty}, switching to Toyota`),g.brand="toyota"),g.uscContext==="stock"&&!f?u?(i(`Stock Cars is not available for ${(_=G[r])==null?void 0:_.pretty}, switching to Used Cars`),g.uscContext="used"):i(`Stock Cars is not available for ${(L=G[r])==null?void 0:L.pretty}`):g.uscContext==="used"&&!u&&(f?(i(`Used Cars is not available for ${(q=G[r])==null?void 0:q.pretty}, switching to Stock Cars`),g.uscContext="stock"):i(`Used Cars is not available for ${(S=G[r])==null?void 0:S.pretty}`)),g};w.useEffect(()=>{const a=At();if(Object.keys(a).length>0){const{country:r,nmsc:g,...c}=a;let f=0;if(r){const B=Object.keys(G).findIndex(H=>H===r);B!==-1&&(f=B)}o(f),l({...Se,...c});const u=Object.keys(G)[f],P=Ce({...Se,...c},u);C(P),p(!0)}else{const r=Ut();if(r){const g=Object.keys(G).findIndex(f=>f===r.countryLanguageCode);g!==-1&&o(g),l(r.selectedOptions);const c=Ce(r.selectedOptions,r.countryLanguageCode);C(c),p(!0)}else{const g=Nt();if(g){const c=Object.keys(G).findIndex(u=>u===g.countryLanguageCode);c!==-1&&o(c),l(g.selectedOptions);const f=Ce(g.selectedOptions,g.countryLanguageCode);C(f),p(!0)}else{const c=Object.keys(G)[0],f=Ce(Se,c);C(f)}}}N(!0)},[]),w.useEffect(()=>{if(z){const a=setTimeout(()=>{D(null)},3e3);return()=>{clearTimeout(a)}}},[z]),w.useEffect(()=>{A&&(de(),Bt({selectedOptions:n,countryLanguageCode:se}))},[n,se,A]);const he=(a,r)=>{const g={...n,[a]:r};p(!0);const c=oe(g,se);l(c),J(c)},de=()=>{const a=Ce(n,se);C(a)},J=(a,r,g)=>{var P;const c=r||se,f=g||((P=G[se])==null?void 0:P.nmsc),u=Pt(a,c,f);window.history.pushState({},"",u)},$=()=>{var f;if(j>=Object.keys(G).length-1){i("No more countries available - can't go forward.");return}p(!0);const a=j+1,r=Object.keys(G)[a],g=oe(n,r);l(g),o(a);const c=(f=G[r])==null?void 0:f.nmsc;J(g,r,c)},t=()=>{var f;if(j<=0){i("First country - can't go back.");return}p(!0);const a=j-1,r=Object.keys(G)[a],g=oe(n,r);l(g),o(a);const c=(f=G[r])==null?void 0:f.nmsc;J(g,r,c)},s=a=>{var g;const r=Object.keys(G).findIndex(c=>c===a);if(r!==-1){p(!0);const c=oe(n,a);l(c),o(r);const f=(g=G[a])==null?void 0:g.nmsc;J(c,a,f)}},i=a=>{D(a)},m=async()=>{try{await navigator.clipboard.writeText(h),i("URL copied to clipboard")}catch{i("Failed to copy URL")}},x=()=>{p(!1)},v=()=>{U(!M)},k=w.useCallback(()=>{O(a=>{if(!a.isResponsiveMode){const r=Ie.find(g=>g.name==="iPhone 12/13/14");return r?{width:r.width,height:r.height,isResponsiveMode:!0,deviceName:r.name}:{width:390,height:844,isResponsiveMode:!0,deviceName:"Mobile"}}return{width:window.innerWidth-(M?400:50),height:window.innerHeight-100,isResponsiveMode:!1}}),i(W.isResponsiveMode?"Exited responsive mode":"Entered responsive mode")},[W.isResponsiveMode,M]),T=w.useCallback((a,r)=>{a.preventDefault(),ee(!0);const g=a.clientX,c=a.clientY,f=W.width,u=W.height,P=H=>{H.preventDefault();let Z=f,_=u;r.includes("e")&&(Z=Math.max(320,f+(H.clientX-g))),r.includes("w")&&(Z=Math.max(320,f-(H.clientX-g))),r.includes("s")&&(_=Math.max(568,u+(H.clientY-c))),r.includes("n")&&(_=Math.max(568,u-(H.clientY-c)));const L=Ie.find(q=>Math.abs(q.width-Z)<=5&&Math.abs(q.height-_)<=5);O({width:Z,height:_,isResponsiveMode:!0,deviceName:L==null?void 0:L.name})},B=()=>{ee(!1),document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",B)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",B)},[W.width,W.height]),R=w.useCallback((a,r)=>{const g=Ie.find(c=>c.width===a&&c.height===r);O({width:a,height:r,isResponsiveMode:!0,deviceName:g==null?void 0:g.name}),i(`Changed to ${(g==null?void 0:g.name)||`${a}×${r}`}`)},[]),y=w.useCallback(()=>{O(a=>({width:a.height,height:a.width,isResponsiveMode:a.isResponsiveMode,deviceName:a.deviceName?`${a.deviceName} (Rotated)`:void 0})),i("Rotated dimensions")},[]);return{selectedOptions:n,countryLanguageCode:se,currentCountryIndex:j,generatedUrl:h,notification:z,iframeLoading:b,sidebarOpen:M,frameDimensions:W,isResizing:V,handleOptionChange:he,goToNextCountry:$,goToPreviousCountry:t,changeCountry:s,copyUrlToClipboard:m,handleIframeLoad:x,toggleSidebar:v,toggleResponsiveMode:k,handleResize:T,changeDeviceSize:R,rotateDimensions:y}},Zt=n=>{const l=n.device||"desktop";return l==="mobile"?`${n.component}-${n.brand}-${n.uscContext}-${l}`:`${n.component}-${n.brand}-${n.uscContext}`},es=async()=>{try{return await Yt()}catch(n){return console.error("Failed to fetch test scenarios:",n),ts()}},ts=()=>({"carFilter-toyota-used":[{id:"car-filter-basic-functionality",title:"Basic Car Filter Functionality",description:"Testing the basic functionality of the car filter component",steps:[{id:"step-1",instruction:"Open the Car Filter component",expectedResult:"You should see 12 results displayed"},{id:"step-2",instruction:"Press the favorites button on any car",expectedResult:"The car should be added to favorites and the button should change state"},{id:"step-3",instruction:"Filter by price range (€10,000 - €20,000)",expectedResult:"Results should update to only show cars within the selected price range"}]}],default:[{id:"default-scenarios",title:"Basic Component Testing",description:"Generic tests that apply to most components",steps:[{id:"step-1",instruction:"Verify component loads correctly",expectedResult:"Component should display without errors"},{id:"step-2",instruction:"Test responsive behavior",expectedResult:"Component should adapt to different screen sizes"}]}]}),ss=async n=>{const l=Zt(n),j=await es();return j[l]||j.default||[]};var _e={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var ns=_e.exports,Ne;function is(){return Ne||(Ne=1,function(n,l){((j,o)=>{n.exports=o()})(ns,function j(){var o=typeof self<"u"?self:typeof window<"u"?window:o!==void 0?o:{},h,C=!o.document&&!!o.postMessage,z=o.IS_PAPA_WORKER||!1,D={},b=0,p={};function M(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var i=de(s);i.chunkSize=parseInt(i.chunkSize),s.step||s.chunk||(i.chunkSize=null),this._handle=new O(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(s,i){var m=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<m){let v=this._config.newline;v||(x=this._config.quoteChar||'"',v=this._handle.guessLineEndings(s,x)),s=[...s.split(v).slice(m)].join(v)}this.isFirstChunk&&$(this._config.beforeFirstChunk)&&(x=this._config.beforeFirstChunk(s))!==void 0&&(s=x),this.isFirstChunk=!1,this._halted=!1;var m=this._partialLine+s,x=(this._partialLine="",this._handle.parse(m,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=x.meta.cursor,m=(this._finished||(this._partialLine=m.substring(s-this._baseIndex),this._baseIndex=s),x&&x.data&&(this._rowCount+=x.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),z)o.postMessage({results:x,workerId:p.WORKER_ID,finished:m});else if($(this._config.chunk)&&!i){if(this._config.chunk(x,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=x=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(x.data),this._completeResults.errors=this._completeResults.errors.concat(x.errors),this._completeResults.meta=x.meta),this._completed||!m||!$(this._config.complete)||x&&x.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),m||x&&x.meta.paused||this._nextChunk(),x}this._halted=!0},this._sendError=function(s){$(this._config.error)?this._config.error(s):z&&this._config.error&&o.postMessage({workerId:p.WORKER_ID,error:s,finished:!1})}}function U(t){var s;(t=t||{}).chunkSize||(t.chunkSize=p.RemoteChunkSize),M.call(this,t),this._nextChunk=C?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),C||(s.onload=J(this._chunkLoaded,this),s.onerror=J(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!C),this._config.downloadRequestHeaders){var i,m=this._config.downloadRequestHeaders;for(i in m)s.setRequestHeader(i,m[i])}var x;this._config.chunkSize&&(x=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+x));try{s.send(this._config.downloadRequestBody)}catch(v){this._chunkError(v.message)}C&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(i){i=s.statusText||i,this._sendError(new Error(i))}}function A(t){(t=t||{}).chunkSize||(t.chunkSize=p.LocalChunkSize),M.call(this,t);var s,i,m=typeof FileReader<"u";this.stream=function(x){this._input=x,i=x.slice||x.webkitSlice||x.mozSlice,m?((s=new FileReader).onload=J(this._chunkLoaded,this),s.onerror=J(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var x=this._input,v=(this._config.chunkSize&&(v=Math.min(this._start+this._config.chunkSize,this._input.size),x=i.call(x,this._start,v)),s.readAsText(x,this._config.encoding));m||this._chunkLoaded({target:{result:v}})},this._chunkLoaded=function(x){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(x.target.result)},this._chunkError=function(){this._sendError(s.error)}}function N(t){var s;M.call(this,t=t||{}),this.stream=function(i){return s=i,this._nextChunk()},this._nextChunk=function(){var i,m;if(!this._finished)return i=this._config.chunkSize,s=i?(m=s.substring(0,i),s.substring(i)):(m=s,""),this._finished=!s,this.parseChunk(m)}}function W(t){M.call(this,t=t||{});var s=[],i=!0,m=!1;this.pause=function(){M.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){M.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(x){this._input=x,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){m&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):i=!0},this._streamData=J(function(x){try{s.push(typeof x=="string"?x:x.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(v){this._streamError(v)}},this),this._streamError=J(function(x){this._streamCleanUp(),this._sendError(x)},this),this._streamEnd=J(function(){this._streamCleanUp(),m=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function O(t){var s,i,m,x,v=Math.pow(2,53),k=-v,T=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,R=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,a=0,r=0,g=!1,c=!1,f=[],u={data:[],errors:[],meta:{}};function P(_){return t.skipEmptyLines==="greedy"?_.join("").trim()==="":_.length===1&&_[0].length===0}function B(){if(u&&m&&(Z("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+p.DefaultDelimiter+"'"),m=!1),t.skipEmptyLines&&(u.data=u.data.filter(function(S){return!P(S)})),H()){let S=function(X,te){$(t.transformHeader)&&(X=t.transformHeader(X,te)),f.push(X)};if(u)if(Array.isArray(u.data[0])){for(var _=0;H()&&_<u.data.length;_++)u.data[_].forEach(S);u.data.splice(0,1)}else u.data.forEach(S)}function L(S,X){for(var te=t.header?{}:[],K=0;K<S.length;K++){var Y=K,F=S[K],F=((ue,I)=>(Q=>(t.dynamicTypingFunction&&t.dynamicTyping[Q]===void 0&&(t.dynamicTyping[Q]=t.dynamicTypingFunction(Q)),(t.dynamicTyping[Q]||t.dynamicTyping)===!0))(ue)?I==="true"||I==="TRUE"||I!=="false"&&I!=="FALSE"&&((Q=>{if(T.test(Q)&&(Q=parseFloat(Q),k<Q&&Q<v))return 1})(I)?parseFloat(I):R.test(I)?new Date(I):I===""?null:I):I)(Y=t.header?K>=f.length?"__parsed_extra":f[K]:Y,F=t.transform?t.transform(F,Y):F);Y==="__parsed_extra"?(te[Y]=te[Y]||[],te[Y].push(F)):te[Y]=F}return t.header&&(K>f.length?Z("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+K,r+X):K<f.length&&Z("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+K,r+X)),te}var q;u&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!u.data.length||Array.isArray(u.data[0])?(u.data=u.data.map(L),q=u.data.length):u.data=L(u.data,0),t.header&&u.meta&&(u.meta.fields=f),r+=q)}function H(){return t.header&&f.length===0}function Z(_,L,q,S){_={type:_,code:L,message:q},S!==void 0&&(_.row=S),u.errors.push(_)}$(t.step)&&(x=t.step,t.step=function(_){u=_,H()?B():(B(),u.data.length!==0&&(a+=_.data.length,t.preview&&a>t.preview?i.abort():(u.data=u.data[0],x(u,y))))}),this.parse=function(_,L,q){var S=t.quoteChar||'"',S=(t.newline||(t.newline=this.guessLineEndings(_,S)),m=!1,t.delimiter?$(t.delimiter)&&(t.delimiter=t.delimiter(_),u.meta.delimiter=t.delimiter):((S=((X,te,K,Y,F)=>{var ue,I,Q,be;F=F||[",","	","|",";",p.RECORD_SEP,p.UNIT_SEP];for(var je=0;je<F.length;je++){for(var fe,we=F[je],ie=0,xe=0,ne=0,ae=(Q=void 0,new ee({comments:Y,delimiter:we,newline:te,preview:10}).parse(X)),ge=0;ge<ae.data.length;ge++)K&&P(ae.data[ge])?ne++:(fe=ae.data[ge].length,xe+=fe,Q===void 0?Q=fe:0<fe&&(ie+=Math.abs(fe-Q),Q=fe));0<ae.data.length&&(xe/=ae.data.length-ne),(I===void 0||ie<=I)&&(be===void 0||be<xe)&&1.99<xe&&(I=ie,ue=we,be=xe)}return{successful:!!(t.delimiter=ue),bestDelimiter:ue}})(_,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=S.bestDelimiter:(m=!0,t.delimiter=p.DefaultDelimiter),u.meta.delimiter=t.delimiter),de(t));return t.preview&&t.header&&S.preview++,s=_,i=new ee(S),u=i.parse(s,L,q),B(),g?{meta:{paused:!0}}:u||{meta:{paused:!1}}},this.paused=function(){return g},this.pause=function(){g=!0,i.abort(),s=$(t.chunk)?"":s.substring(i.getCharIndex())},this.resume=function(){y.streamer._halted?(g=!1,y.streamer.parseChunk(s,!0)):setTimeout(y.resume,3)},this.aborted=function(){return c},this.abort=function(){c=!0,i.abort(),u.meta.aborted=!0,$(t.complete)&&t.complete(u),s=""},this.guessLineEndings=function(X,S){X=X.substring(0,1048576);var S=new RegExp(V(S)+"([^]*?)"+V(S),"gm"),q=(X=X.replace(S,"")).split("\r"),S=X.split(`
`),X=1<S.length&&S[0].length<q[0].length;if(q.length===1||X)return`
`;for(var te=0,K=0;K<q.length;K++)q[K][0]===`
`&&te++;return te>=q.length/2?`\r
`:"\r"}}function V(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(t){var s=(t=t||{}).delimiter,i=t.newline,m=t.comments,x=t.step,v=t.preview,k=t.fastMode,T=null,R=!1,y=t.quoteChar==null?'"':t.quoteChar,a=y;if(t.escapeChar!==void 0&&(a=t.escapeChar),(typeof s!="string"||-1<p.BAD_DELIMITERS.indexOf(s))&&(s=","),m===s)throw new Error("Comment character same as delimiter");m===!0?m="#":(typeof m!="string"||-1<p.BAD_DELIMITERS.indexOf(m))&&(m=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var r=0,g=!1;this.parse=function(c,f,u){if(typeof c!="string")throw new Error("Input must be a string");var P=c.length,B=s.length,H=i.length,Z=m.length,_=$(x),L=[],q=[],S=[],X=r=0;if(!c)return ie();if(k||k!==!1&&c.indexOf(y)===-1){for(var te=c.split(i),K=0;K<te.length;K++){if(S=te[K],r+=S.length,K!==te.length-1)r+=i.length;else if(u)return ie();if(!m||S.substring(0,Z)!==m){if(_){if(L=[],be(S.split(s)),xe(),g)return ie()}else be(S.split(s));if(v&&v<=K)return L=L.slice(0,v),ie(!0)}}return ie()}for(var Y=c.indexOf(s,r),F=c.indexOf(i,r),ue=new RegExp(V(a)+V(y),"g"),I=c.indexOf(y,r);;)if(c[r]===y)for(I=r,r++;;){if((I=c.indexOf(y,I+1))===-1)return u||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:L.length,index:r}),fe();if(I===P-1)return fe(c.substring(r,I).replace(ue,y));if(y===a&&c[I+1]===a)I++;else if(y===a||I===0||c[I-1]!==a){Y!==-1&&Y<I+1&&(Y=c.indexOf(s,I+1));var Q=je((F=F!==-1&&F<I+1?c.indexOf(i,I+1):F)===-1?Y:Math.min(Y,F));if(c.substr(I+1+Q,B)===s){S.push(c.substring(r,I).replace(ue,y)),c[r=I+1+Q+B]!==y&&(I=c.indexOf(y,r)),Y=c.indexOf(s,r),F=c.indexOf(i,r);break}if(Q=je(F),c.substring(I+1+Q,I+1+Q+H)===i){if(S.push(c.substring(r,I).replace(ue,y)),we(I+1+Q+H),Y=c.indexOf(s,r),I=c.indexOf(y,r),_&&(xe(),g))return ie();if(v&&L.length>=v)return ie(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:L.length,index:r}),I++}}else if(m&&S.length===0&&c.substring(r,r+Z)===m){if(F===-1)return ie();r=F+H,F=c.indexOf(i,r),Y=c.indexOf(s,r)}else if(Y!==-1&&(Y<F||F===-1))S.push(c.substring(r,Y)),r=Y+B,Y=c.indexOf(s,r);else{if(F===-1)break;if(S.push(c.substring(r,F)),we(F+H),_&&(xe(),g))return ie();if(v&&L.length>=v)return ie(!0)}return fe();function be(ne){L.push(ne),X=r}function je(ne){var ae=0;return ae=ne!==-1&&(ne=c.substring(I+1,ne))&&ne.trim()===""?ne.length:ae}function fe(ne){return u||(ne===void 0&&(ne=c.substring(r)),S.push(ne),r=P,be(S),_&&xe()),ie()}function we(ne){r=ne,be(S),S=[],F=c.indexOf(i,r)}function ie(ne){if(t.header&&!f&&L.length&&!R){var ae=L[0],ge={},Ee=new Set(ae);let Le=!1;for(let ke=0;ke<ae.length;ke++){let me=ae[ke];if(ge[me=$(t.transformHeader)?t.transformHeader(me,ke):me]){let ve,Me=ge[me];for(;ve=me+"_"+Me,Me++,Ee.has(ve););Ee.add(ve),ae[ke]=ve,ge[me]++,Le=!0,(T=T===null?{}:T)[ve]=me}else ge[me]=1,ae[ke]=me;Ee.add(me)}Le&&console.warn("Duplicate headers found and renamed."),R=!0}return{data:L,errors:q,meta:{delimiter:s,linebreak:i,aborted:g,truncated:!!ne,cursor:X+(f||0),renamedHeaders:T}}}function xe(){x(ie()),L=[],q=[]}},this.abort=function(){g=!0},this.getCharIndex=function(){return r}}function se(t){var s=t.data,i=D[s.workerId],m=!1;if(s.error)i.userError(s.error,s.file);else if(s.results&&s.results.data){var x={abort:function(){m=!0,oe(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:he,resume:he};if($(i.userStep)){for(var v=0;v<s.results.data.length&&(i.userStep({data:s.results.data[v],errors:s.results.errors,meta:s.results.meta},x),!m);v++);delete s.results}else $(i.userChunk)&&(i.userChunk(s.results,x,s.file),delete s.results)}s.finished&&!m&&oe(s.workerId,s.results)}function oe(t,s){var i=D[t];$(i.userComplete)&&i.userComplete(s),i.terminate(),delete D[t]}function he(){throw new Error("Not implemented.")}function de(t){if(typeof t!="object"||t===null)return t;var s,i=Array.isArray(t)?[]:{};for(s in t)i[s]=de(t[s]);return i}function J(t,s){return function(){t.apply(s,arguments)}}function $(t){return typeof t=="function"}return p.parse=function(t,s){var i=(s=s||{}).dynamicTyping||!1;if($(i)&&(s.dynamicTypingFunction=i,i={}),s.dynamicTyping=i,s.transform=!!$(s.transform)&&s.transform,!s.worker||!p.WORKERS_SUPPORTED)return i=null,p.NODE_STREAM_INPUT,typeof t=="string"?(t=(m=>m.charCodeAt(0)!==65279?m:m.slice(1))(t),i=new(s.download?U:N)(s)):t.readable===!0&&$(t.read)&&$(t.on)?i=new W(s):(o.File&&t instanceof File||t instanceof Object)&&(i=new A(s)),i.stream(t);(i=(()=>{var m;return!!p.WORKERS_SUPPORTED&&(m=(()=>{var x=o.URL||o.webkitURL||null,v=j.toString();return p.BLOB_URL||(p.BLOB_URL=x.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",v,")();"],{type:"text/javascript"})))})(),(m=new o.Worker(m)).onmessage=se,m.id=b++,D[m.id]=m)})()).userStep=s.step,i.userChunk=s.chunk,i.userComplete=s.complete,i.userError=s.error,s.step=$(s.step),s.chunk=$(s.chunk),s.complete=$(s.complete),s.error=$(s.error),delete s.worker,i.postMessage({input:t,config:s,workerId:i.id})},p.unparse=function(t,s){var i=!1,m=!0,x=",",v=`\r
`,k='"',T=k+k,R=!1,y=null,a=!1,r=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||p.BAD_DELIMITERS.filter(function(f){return s.delimiter.indexOf(f)!==-1}).length||(x=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(i=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(R=s.skipEmptyLines),typeof s.newline=="string"&&(v=s.newline),typeof s.quoteChar=="string"&&(k=s.quoteChar),typeof s.header=="boolean"&&(m=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");y=s.columns}s.escapeChar!==void 0&&(T=s.escapeChar+k),s.escapeFormulae instanceof RegExp?a=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(a=/^[=+\-@\t\r].*$/)}})(),new RegExp(V(k),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return g(null,t,R);if(typeof t[0]=="object")return g(y||Object.keys(t[0]),t,R)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||y),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),g(t.fields||[],t.data||[],R);throw new Error("Unable to serialize unrecognized input");function g(f,u,P){var B="",H=(typeof f=="string"&&(f=JSON.parse(f)),typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(f)&&0<f.length),Z=!Array.isArray(u[0]);if(H&&m){for(var _=0;_<f.length;_++)0<_&&(B+=x),B+=c(f[_],_);0<u.length&&(B+=v)}for(var L=0;L<u.length;L++){var q=(H?f:u[L]).length,S=!1,X=H?Object.keys(u[L]).length===0:u[L].length===0;if(P&&!H&&(S=P==="greedy"?u[L].join("").trim()==="":u[L].length===1&&u[L][0].length===0),P==="greedy"&&H){for(var te=[],K=0;K<q;K++){var Y=Z?f[K]:K;te.push(u[L][Y])}S=te.join("").trim()===""}if(!S){for(var F=0;F<q;F++){0<F&&!X&&(B+=x);var ue=H&&Z?f[F]:F;B+=c(u[L][ue],F)}L<u.length-1&&(!P||0<q&&!X)&&(B+=v)}}return B}function c(f,u){var P,B;return f==null?"":f.constructor===Date?JSON.stringify(f).slice(1,25):(B=!1,a&&typeof f=="string"&&a.test(f)&&(f="'"+f,B=!0),P=f.toString().replace(r,T),(B=B||i===!0||typeof i=="function"&&i(f,u)||Array.isArray(i)&&i[u]||((H,Z)=>{for(var _=0;_<Z.length;_++)if(-1<H.indexOf(Z[_]))return!0;return!1})(P,p.BAD_DELIMITERS)||-1<P.indexOf(x)||P.charAt(0)===" "||P.charAt(P.length-1)===" ")?k+P+k:P)}},p.RECORD_SEP="",p.UNIT_SEP="",p.BYTE_ORDER_MARK="\uFEFF",p.BAD_DELIMITERS=["\r",`
`,'"',p.BYTE_ORDER_MARK],p.WORKERS_SUPPORTED=!C&&!!o.Worker,p.NODE_STREAM_INPUT=1,p.LocalChunkSize=10485760,p.RemoteChunkSize=5242880,p.DefaultDelimiter=",",p.Parser=ee,p.ParserHandle=O,p.NetworkStreamer=U,p.FileStreamer=A,p.StringStreamer=N,p.ReadableStreamStreamer=W,o.jQuery&&((h=o.jQuery).fn.parse=function(t){var s=t.config||{},i=[];return this.each(function(v){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&o.FileReader)||!this.files||this.files.length===0)return!0;for(var k=0;k<this.files.length;k++)i.push({file:this.files[k],inputElem:this,instanceConfig:h.extend({},s)})}),m(),this;function m(){if(i.length===0)$(t.complete)&&t.complete();else{var v,k,T,R,y=i[0];if($(t.before)){var a=t.before(y.file,y.inputElem);if(typeof a=="object"){if(a.action==="abort")return v="AbortError",k=y.file,T=y.inputElem,R=a.reason,void($(t.error)&&t.error({name:v},k,T,R));if(a.action==="skip")return void x();typeof a.config=="object"&&(y.instanceConfig=h.extend(y.instanceConfig,a.config))}else if(a==="skip")return void x()}var r=y.instanceConfig.complete;y.instanceConfig.complete=function(g){$(r)&&r(g,y.file,y.inputElem),x()},p.parse(y.file,y.instanceConfig)}}function x(){i.splice(0,1),m()}}),z&&(o.onmessage=function(t){t=t.data,p.WORKER_ID===void 0&&t&&(p.WORKER_ID=t.workerId),typeof t.input=="string"?o.postMessage({workerId:p.WORKER_ID,results:p.parse(t.input,t.config),finished:!0}):(o.File&&t.input instanceof File||t.input instanceof Object)&&(t=p.parse(t.input,t.config))&&o.postMessage({workerId:p.WORKER_ID,results:t,finished:!0})}),(U.prototype=Object.create(M.prototype)).constructor=U,(A.prototype=Object.create(M.prototype)).constructor=A,(N.prototype=Object.create(N.prototype)).constructor=N,(W.prototype=Object.create(M.prototype)).constructor=W,p})}(_e)),_e.exports}var rs=is();const os=$t(rs),as=({selectedOptions:n,onProgressUpdate:l})=>{const[j,o]=w.useState(null),[h,C]=w.useState({}),[z,D]=w.useState({}),[b,p]=w.useState([]),[M,U]=w.useState(!1),[A,N]=w.useState(!1),[W,O]=w.useState(null),[V,ee]=w.useState(null);w.useEffect(()=>{if(V){const k=setTimeout(()=>{ee(null)},2e3);return()=>clearTimeout(k)}},[V]);const se=w.useCallback(async()=>{U(!0),O(null);try{const k=await ss(n);console.log("Fetched scenarios:",k),p(k)}catch(k){console.error("Failed to fetch test scenarios:",k),O("Failed to load test instructions. Please try again later.")}finally{U(!1)}},[n]);w.useEffect(()=>{A&&se()},[se,A]);const oe=w.useCallback((k,T)=>{let R=0,y=0,a=0,r=0;k.forEach(f=>{f.steps.forEach(u=>{R++;const P=`${f.id}-${u.id}`,B=T[P];B==="pass"?y++:B==="fail"?a++:B==="blocked"&&r++})});const g=R-y-a-r,c=R===0?0:Math.round((y+a+r)/R*100);return{total:R,passed:y,failed:a,blocked:r,notTested:g,completion:c}},[]),he=w.useCallback((k,T)=>{if(T.length===0)return{completion:0,passed:0,failed:0,blocked:0};let R=0,y=0,a=0,r=0;return T.forEach(c=>{const f=`${k}-${c.id}`,u=h[f];u&&(R++,u==="pass"?y++:u==="fail"?a++:u==="blocked"&&r++)}),{completion:Math.round(R/T.length*100),passed:y,failed:a,blocked:r}},[h]),de=w.useCallback((k,T,R)=>{const y=`${k}-${T}`;C(a=>{if(a[y]===R){const r={...a};return delete r[y],r}return{...a,[y]:R}}),ee(`Step ${R==="pass"?"passed":R==="fail"?"failed":"blocked"}`)},[]),J=w.useCallback((k,T,R)=>{C(y=>{const a={...y};return T.forEach(r=>{const g=`${k}-${r.id}`;y[g]!==R&&(a[g]=R)}),a}),ee(`All steps marked as ${R==="pass"?"passed":R==="fail"?"failed":"blocked"}`)},[]),$=w.useCallback(k=>{D(T=>({...T,[k]:!T[k]}))},[]),t=w.useCallback(k=>{o(T=>T===k?null:k)},[]),s=w.useCallback((k,T)=>{C(R=>{const y={...R};return T.forEach(a=>{const r=`${k}-${a.id}`;delete y[r]}),y}),ee("Reset all steps in this scenario")},[]),i=w.useCallback(()=>{N(k=>!k)},[]),m=w.useCallback(()=>{const k=new Date().toISOString().replace(/[:.]/g,"-"),T=`test-results-${n.component||"unknown"}-${n.brand||"unknown"}-${n.uscContext||"unknown"}-${k}.csv`,R=[];R.push(["Component","Brand","Context","Scenario","StepID","Instruction","Expected Result","Status","Notes"]),b.forEach(c=>{c.steps.forEach(f=>{const u=`${c.id}-${f.id}`,P=h[u]||"not-tested";R.push([n.component||"unknown",n.brand||"unknown",n.uscContext||"unknown",c.title,f.id,f.instruction,f.expectedResult,P,""])})});const y=os.unparse(R,{quotes:!0,quoteChar:'"',escapeChar:'"',delimiter:",",header:!1,newline:`
`}),a=new Blob([y],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),g=URL.createObjectURL(a);r.href=g,r.setAttribute("download",T),document.body.appendChild(r),r.click(),document.body.removeChild(r),ee(`Exported results to ${T}`)},[b,h,n]),x=w.useMemo(()=>oe(b,h),[b,h,oe]);w.useEffect(()=>{l&&l(x)},[x,l]);const v=w.useCallback(()=>(ee("Opening printable test report..."),{selectedOptions:n,stepStatuses:h}),[n,h]);return{expandedScenario:j,stepStatuses:h,showExpectedResults:z,scenarios:b,loading:M,sidebarOpen:A,error:W,notification:V,progressData:x,toggleSidebar:i,toggleExpectedResult:$,handleAccordionChange:t,setStepStatus:de,markAllSteps:J,resetScenario:s,exportTestResults:m,openPrintableReport:v,getScenarioProgress:he,fetchScenarios:se,setNotification:ee}},ls=({scenario:n,step:l,index:j,showExpected:o,status:h,onToggleExpected:C,onSetStatus:z,getStatusColor:D})=>{const b=le();return e.jsx(Je,{sx:{display:"block",py:1.5,px:2,borderBottom:"1px solid ${theme.palette.divider}","&:hover":{backgroundColor:b.palette.mode==="dark"?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.01)"},borderLeft:h?`3px solid ${D(h)}`:"none",ml:h?0:"3px",transition:"all 0.2s ease"},children:e.jsxs(d,{sx:{display:"flex",alignItems:"flex-start"},children:[e.jsx(Ze,{sx:{minWidth:36,mt:.5},children:h?e.jsx(d,{sx:{width:24,height:24,borderRadius:"50%",bgcolor:D(h),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14,boxShadow:b.shadows[1],transition:"transform 0.2s ease","&:hover":{transform:"scale(1.1)"}},children:h==="pass"?e.jsx(Oe,{sx:{fontSize:16}}):h==="fail"?e.jsx(Te,{sx:{fontSize:16}}):e.jsx($e,{sx:{fontSize:16}})}):e.jsx(d,{sx:{width:24,height:24,borderRadius:"50%",border:`2px solid ${b.palette.divider}`,display:"flex",alignItems:"center",justifyContent:"center",color:b.palette.text.disabled,transition:"all 0.2s ease","&:hover":{borderColor:b.palette.primary.main,color:b.palette.primary.main}},children:e.jsx(et,{sx:{fontSize:16}})})}),e.jsxs(d,{sx:{flex:1},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"flex-start",mb:.5,position:"relative"},children:[e.jsxs(E,{variant:"body2",component:"div",sx:{flex:1,fontWeight:h?"normal":"medium",color:h==="blocked"?b.palette.text.disabled:"inherit",textDecoration:h==="blocked"?"line-through":"none",cursor:"default",transition:"color 0.2s ease",lineHeight:1.5,"&:hover":{color:b.palette.primary.main}},children:[e.jsxs(d,{component:"span",sx:{mr:1,color:b.palette.text.secondary,fontSize:"0.8rem",opacity:.7},children:[j+1,"."]}),l.instruction]}),e.jsx(re,{title:o?"Hide expected result":"Show expected result",children:e.jsx(ce,{size:"small",onClick:()=>C(l.id),sx:{ml:1,mt:-.5,color:o?b.palette.primary.main:b.palette.text.secondary,transition:"all 0.2s ease",backgroundColor:o?b.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)":"transparent","&:hover":{backgroundColor:b.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.08)"}},children:o?e.jsx(tt,{fontSize:"small"}):e.jsx(st,{fontSize:"small"})})})]}),e.jsx(Be,{in:o,children:e.jsxs(d,{sx:{ml:0,mt:1,mb:1,p:1.5,backgroundColor:b.palette.mode==="dark"?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)",borderRadius:1,border:`1px solid ${b.palette.divider}`,transition:"all 0.3s ease",position:"relative","&:before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:3,backgroundColor:h==="fail"?b.palette.error.main:h==="pass"?b.palette.success.main:b.palette.info.main,borderTopLeftRadius:4,borderBottomLeftRadius:4},boxShadow:b.shadows[1]},children:[e.jsx(E,{variant:"caption",component:"div",sx:{fontWeight:"bold",mb:.5,display:"flex",alignItems:"center"},children:e.jsx("span",{children:"Expected Result:"})}),e.jsx(E,{variant:"body2",component:"div",sx:{color:h==="fail"?b.palette.error.main:h==="pass"?b.palette.success.main:"inherit",fontStyle:"italic",pl:.5,lineHeight:1.5},children:l.expectedResult})]})}),e.jsx(d,{sx:{display:"flex",mt:1.5,justifyContent:"flex-start"},children:e.jsxs(We,{size:"small",variant:"outlined",sx:{boxShadow:b.shadows[1],".MuiButton-root":{transition:"all 0.2s ease"}},children:[e.jsx(re,{title:"Mark as Passed",children:e.jsx(pe,{color:"success",onClick:()=>z(n.id,l.id,"pass"),variant:h==="pass"?"contained":"outlined",sx:{minWidth:"40px",px:1,"&.MuiButton-contained":{boxShadow:b.shadows[2]},"&:hover":{transform:"translateY(-1px)",boxShadow:b.shadows[3]}},children:e.jsx(Oe,{fontSize:"small"})})}),e.jsx(re,{title:"Mark as Failed",children:e.jsx(pe,{color:"error",onClick:()=>z(n.id,l.id,"fail"),variant:h==="fail"?"contained":"outlined",sx:{minWidth:"40px",px:1,"&.MuiButton-contained":{boxShadow:b.shadows[2]},"&:hover":{transform:"translateY(-1px)",boxShadow:b.shadows[3]}},children:e.jsx(Te,{fontSize:"small"})})}),e.jsx(re,{title:"Mark as Blocked",children:e.jsx(pe,{color:"warning",onClick:()=>z(n.id,l.id,"blocked"),variant:h==="blocked"?"contained":"outlined",sx:{minWidth:"40px",px:1,"&.MuiButton-contained":{boxShadow:b.shadows[2]},"&:hover":{transform:"translateY(-1px)",boxShadow:b.shadows[3]}},children:e.jsx($e,{fontSize:"small"})})})]})})]})]})},l.id)},ds=w.memo(ls,(n,l)=>n.status===l.status&&n.showExpected===l.showExpected&&n.index===l.index),cs=({completion:n,passed:l,failed:j,blocked:o,steps:h})=>{const C=le();return e.jsxs(d,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsxs(d,{sx:{height:4,width:60,bgcolor:C.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:1,mr:1,overflow:"hidden",display:"flex"},children:[l>0&&e.jsx(d,{sx:{height:"100%",width:`${l/h.length*100}%`,bgcolor:C.palette.success.main}}),j>0&&e.jsx(d,{sx:{height:"100%",width:`${j/h.length*100}%`,bgcolor:C.palette.error.main}}),o>0&&e.jsx(d,{sx:{height:"100%",width:`${o/h.length*100}%`,bgcolor:C.palette.warning.main}})]}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n,"% complete"]})]})},hs=({scenario:n,expanded:l,stepStatuses:j,showExpectedResults:o,onResetScenario:h,onToggleAccordion:C,onToggleExpected:z,onSetStatus:D,onMarkAllSteps:b,getStatusColor:p,scenarioProgress:M})=>{const U=le();return e.jsxs(nt,{expanded:l,onChange:()=>C(n.id),disableGutters:!0,elevation:0,sx:{"&:before":{display:"none"},borderBottom:`1px solid ${U.palette.divider}`},children:[e.jsx(it,{expandIcon:e.jsx(He,{}),sx:{px:3,minHeight:"56px !important",backgroundColor:l?U.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)":"transparent","&:hover":{backgroundColor:U.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},children:e.jsx(d,{sx:{display:"flex",alignItems:"center",width:"100%"},children:e.jsxs(d,{sx:{flexGrow:1},children:[e.jsx(E,{variant:"subtitle2",fontWeight:"medium",children:n.title}),e.jsx(cs,{completion:M.completion,passed:M.passed,failed:M.failed,blocked:M.blocked,steps:n.steps})]})})}),l&&e.jsxs(d,{sx:{borderBottom:`1px solid ${U.palette.divider}`,backgroundColor:U.palette.mode==="dark"?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",gap:2,px:3,py:1.5},children:[e.jsx(pe,{size:"small",onClick:A=>{A.stopPropagation(),h(n.id,n.steps)},variant:"outlined",color:"inherit",startIcon:e.jsx(Te,{fontSize:"small"}),sx:{fontSize:"0.75rem",borderRadius:1,textTransform:"none",px:1.5,py:.5,minHeight:0,minWidth:0,"&:hover":{backgroundColor:U.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.08)"}},children:"Reset all steps"}),e.jsx(We,{size:"small",variant:"outlined",children:e.jsx(pe,{onClick:A=>{A.stopPropagation(),b==null||b(n.id,n.steps,"pass")},color:"success",startIcon:e.jsx(rt,{fontSize:"small"}),sx:{fontSize:"0.75rem",textTransform:"none",px:1.5,py:.5,minHeight:0},children:"Mark all passed"})})]}),e.jsx(ot,{sx:{p:0},children:e.jsx(at,{disablePadding:!0,children:n.steps.map((A,N)=>{const W=`${n.id}-${A.id}`,O=j[W],V=o[A.id]||!1;return e.jsx(ds,{scenario:n,step:A,index:N,status:O,showExpected:V,onToggleExpected:z,onSetStatus:D,getStatusColor:p},A.id)})})})]})},us=w.memo(hs,(n,l)=>n.expanded===l.expanded&&n.scenarioProgress.completion===l.scenarioProgress.completion&&n.scenarioProgress.passed===l.scenarioProgress.passed&&n.scenarioProgress.failed===l.scenarioProgress.failed&&n.scenarioProgress.blocked===l.scenarioProgress.blocked),ps=({progressData:n,onExportResults:l,onViewPrintableReport:j,hasScenarios:o})=>{const h=le();return e.jsxs(d,{sx:{padding:3,borderBottom:`1px solid ${h.palette.divider}`},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(E,{variant:"subtitle2",color:"text.secondary",children:"Overall Progress"}),e.jsxs(E,{variant:"body2",fontWeight:"medium",children:[n.completion,"% Complete"]})]}),e.jsxs(d,{sx:{height:8,width:"100%",bgcolor:h.palette.grey[200],borderRadius:1,overflow:"hidden",display:"flex"},children:[n.passed>0&&e.jsx(d,{sx:{height:"100%",width:`${n.passed/n.total*100}%`,bgcolor:h.palette.success.main}}),n.failed>0&&e.jsx(d,{sx:{height:"100%",width:`${n.failed/n.total*100}%`,bgcolor:h.palette.error.main}}),n.blocked>0&&e.jsx(d,{sx:{height:"100%",width:`${n.blocked/n.total*100}%`,bgcolor:h.palette.warning.main}})]}),e.jsxs(d,{sx:{display:"flex",mt:1,justifyContent:"space-between"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:h.palette.success.main,mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.passed," Passed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:h.palette.error.main,mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.failed," Failed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:h.palette.warning.main,mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.blocked," Blocked"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:h.palette.grey[300],mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.notTested," Not Tested"]})]})]}),o&&e.jsxs(ye,{spacing:1,sx:{mt:2},children:[e.jsx(pe,{variant:"outlined",fullWidth:!0,size:"small",startIcon:e.jsx(lt,{}),onClick:l,children:"Export Results to CSV"}),j&&e.jsx(pe,{variant:"outlined",fullWidth:!0,size:"small",color:"primary",startIcon:e.jsx(dt,{}),onClick:j,children:"View Printable Report"})]})]})},fs=({selectedOptions:n,onManageTestCases:l})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:4,textAlign:"center"},children:[e.jsx(Ke,{color:"disabled",sx:{fontSize:48,mb:2,opacity:.5}}),e.jsx(E,{variant:"h6",gutterBottom:!0,children:"No test scenarios found"}),e.jsxs(E,{variant:"body2",color:"text.secondary",sx:{mb:3,maxWidth:500},children:["There are no test scenarios for"," ",e.jsxs("strong",{children:[n.component," - ",n.brand," -"," ",n.uscContext]}),". Use the Test Case Management page to add scenarios and test steps."]}),e.jsx(pe,{variant:"contained",size:"small",startIcon:e.jsx(qe,{}),onClick:l,children:"Manage Test Cases"})]}),xs=({message:n="Loading test instructions..."})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:4},children:[e.jsx(ct,{size:40,sx:{mb:2}}),e.jsx(E,{variant:"body2",color:"text.secondary",children:n})]}),ms=({error:n,onRetry:l,onManageTestCases:j})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:4},children:[e.jsx(ht,{severity:"error",sx:{mb:2,width:"100%",maxWidth:500},children:n}),e.jsx(E,{variant:"body2",color:"text.secondary",sx:{mb:2,textAlign:"center"},children:"There was a problem loading the test instructions. You may need to create test scenarios using the Test Case Management page."}),e.jsxs(d,{sx:{display:"flex",gap:1},children:[e.jsx(pe,{variant:"outlined",size:"small",onClick:j,startIcon:e.jsx(qe,{}),children:"Manage Test Cases"}),e.jsx(pe,{variant:"contained",size:"small",onClick:l,children:"Retry"})]})]}),gs=({selectedOptions:n,onProgressUpdate:l,handleOptionChange:j})=>{const o=le(),h=Ft(),C=Ye(o.breakpoints.down("md")),{expandedScenario:z,stepStatuses:D,showExpectedResults:b,scenarios:p,loading:M,sidebarOpen:U,error:A,notification:N,progressData:W,toggleSidebar:O,toggleExpectedResult:V,handleAccordionChange:ee,setStepStatus:se,markAllSteps:oe,resetScenario:he,exportTestResults:de,getScenarioProgress:J,fetchScenarios:$,setNotification:t}=as({selectedOptions:n,onProgressUpdate:l}),s=w.useCallback(v=>{switch(v){case"pass":return o.palette.success.main;case"fail":return o.palette.error.main;case"blocked":return o.palette.warning.main;default:return o.palette.text.disabled}},[o.palette]),i=w.useCallback(()=>{h("/test-case-management")},[h]),m=w.useCallback(()=>{h("/printable-report",{state:{selectedOptions:n,stepStatuses:D,scenarios:p,progressData:W}})},[h,n,D,p,W]),x=w.useCallback(()=>e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:`1px solid ${o.palette.divider}`,backgroundColor:o.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ke,{color:"primary",sx:{mr:1}}),e.jsx(E,{variant:"subtitle1",fontWeight:"medium",children:"Test Instructions"})]}),e.jsx(d,{children:e.jsx(ce,{onClick:O,edge:"end","aria-label":"close",size:"small",children:e.jsx(Ge,{fontSize:"small"})})})]}),e.jsxs(d,{sx:{px:3,py:2,bgcolor:o.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderBottom:`1px solid ${o.palette.divider}`},children:[e.jsxs(E,{variant:"subtitle1",fontWeight:"medium",children:[n.component," - ",n.brand]}),e.jsx(E,{variant:"body2",color:"text.secondary",sx:{mb:2},children:n.uscContext==="used"?"Used Cars":"Stock Cars"}),j&&e.jsxs(d,{sx:{mt:2,mb:1,backgroundColor:o.palette.mode==="dark"?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.03)",borderRadius:2,p:1.5,border:`1px solid ${o.palette.divider}`},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(E,{variant:"subtitle2",color:"text.primary",sx:{display:"flex",alignItems:"center",fontWeight:500},children:"Device Type"}),e.jsx(E,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:n.device==="mobile"?"Mobile test scenarios":"Desktop test scenarios"})]}),e.jsxs(ut,{value:n.device||"desktop",exclusive:!0,onChange:(v,k)=>{k!==null&&j&&(j("device",k),t(`Test scenarios for ${k} view`))},size:"small","aria-label":"device type",fullWidth:!0,sx:{".MuiToggleButtonGroup-grouped":{borderRadius:"8px !important",border:`1px solid ${o.palette.divider} !important`,m:.5,py:.75,flex:1,"&.Mui-selected":{backgroundColor:o.palette.mode==="dark"?"rgba(25, 118, 210, 0.3)":"rgba(25, 118, 210, 0.12)",color:o.palette.primary.main,fontWeight:"bold",boxShadow:o.palette.mode==="dark"?"0 0 8px rgba(25, 118, 210, 0.4)":"0 0 8px rgba(25, 118, 210, 0.2)","&:hover":{backgroundColor:o.palette.mode==="dark"?"rgba(25, 118, 210, 0.35)":"rgba(25, 118, 210, 0.15)"}},"&:hover":{backgroundColor:o.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",transition:"all 0.2s ease"},transition:"all 0.2s ease"}},children:[e.jsxs(Fe,{value:"desktop","aria-label":"desktop view",children:[e.jsx(pt,{fontSize:"small",sx:{mr:1}}),e.jsx(E,{variant:"body2",children:"Desktop"})]}),e.jsxs(Fe,{value:"mobile","aria-label":"mobile view",children:[e.jsx(ft,{fontSize:"small",sx:{mr:1}}),e.jsx(E,{variant:"body2",children:"Mobile"})]})]})]})]}),e.jsx(ps,{progressData:W,onExportResults:de,onViewPrintableReport:m,hasScenarios:p.length>0}),e.jsx(d,{sx:{flexGrow:1,overflowY:"auto",overflowX:"hidden",height:"calc(100% - 240px)"},children:M?e.jsx(xs,{}):A?e.jsx(ms,{error:A,onRetry:$,onManageTestCases:i}):p.length===0?e.jsx(fs,{selectedOptions:n,onManageTestCases:i}):e.jsx(d,{sx:{pb:4},children:p.map(v=>{const k=J(v.id,v.steps),T=z===v.id;return e.jsx(us,{scenario:v,expanded:T,stepStatuses:D,showExpectedResults:b,onResetScenario:he,onToggleAccordion:ee,onToggleExpected:V,onSetStatus:se,onMarkAllSteps:oe,getStatusColor:s,scenarioProgress:k},v.id)})})})]}),[o,z,M,A,p,n,W,D,b,ee,he,O,de,J,V,se,s,$,i,j,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(Qe,{anchor:"right",variant:C?"temporary":"persistent",open:U,onClose:O,sx:{width:U?{xs:"100%",sm:420}:0,flexShrink:0,transition:o.transitions.create("width",{easing:o.transitions.easing.sharp,duration:o.transitions.duration.standard}),"& .MuiDrawer-paper":{width:{xs:"100%",sm:420},maxWidth:"100%",height:"100%",boxSizing:"border-box",position:C?"fixed":"relative",borderLeft:`1px solid ${o.palette.divider}`,display:"flex",flexDirection:"column",overflow:"hidden"}},PaperProps:{elevation:3},children:[x(),e.jsx(xt,{open:!!N,autoHideDuration:2e3,onClose:()=>t(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{zIndex:1500},children:e.jsx(Re,{elevation:2,sx:{px:2,py:1,bgcolor:o.palette.background.paper,borderLeft:"4px solid",borderColor:"primary.main",display:"flex",alignItems:"center"},children:e.jsx(E,{variant:"body2",children:N})})})]}),!U&&e.jsx(re,{title:"Show Test Instructions",children:e.jsx(mt,{color:"primary","aria-label":"test instructions",onClick:O,size:"medium",sx:{position:"fixed",bottom:16,right:16,zIndex:1e3},children:e.jsx(gt,{badgeContent:W.completion+"%",color:W.failed>0?"error":"success",sx:{"& .MuiBadge-badge":{fontSize:"0.65rem",fontWeight:"bold",minWidth:"32px",height:"20px",padding:"0 4px"}},children:e.jsx(bt,{})})})})]})},bs=({countryLanguageCode:n,goToNextCountry:l,goToPreviousCountry:j,changeCountry:o})=>{const[h,C]=w.useState(!1),[z,D]=w.useState(null),b=le(),p=G[n]||{pretty:"Unknown",nmsc:"Unknown"},{pretty:M,nmsc:U}=p,A=Dt(),N=()=>{C(!h),h||D(U)},W=O=>{D(O.target.value)};return e.jsxs(Re,{elevation:1,sx:{p:2,backgroundColor:"background.paper",borderRadius:2,transition:b.transitions.create(["background-color","box-shadow"])},children:[e.jsxs(ye,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[e.jsx(yt,{color:"primary",fontSize:"small"}),e.jsx(E,{variant:"subtitle2",color:"primary",fontWeight:"medium",sx:{flex:1},children:"Country Selection"}),e.jsx(ce,{size:"small",onClick:N,children:h?e.jsx(jt,{fontSize:"small"}):e.jsx(He,{fontSize:"small"})})]}),e.jsx(ze,{sx:{mb:1.5}}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:h?2:0,backgroundColor:b.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":b.palette.grey[50],p:1,borderRadius:1,border:`1px solid ${b.palette.divider}`,transition:b.transitions.create(["background-color","border-color"])},children:[e.jsx(re,{title:"Previous Country",children:e.jsx(ce,{onClick:j,size:"small",color:"primary",children:e.jsx(Xe,{fontSize:"small"})})}),e.jsxs(E,{variant:"body2",sx:{flex:1,textAlign:"center",fontWeight:500,color:"text.primary"},children:[M," (",n,")"]}),e.jsx(re,{title:"Next Country",children:e.jsx(ce,{onClick:l,size:"small",color:"primary",children:e.jsx(Ge,{fontSize:"small"})})})]}),e.jsx(Be,{in:h,children:e.jsx(kt,{in:h,children:e.jsxs(d,{sx:{mt:2},children:[e.jsxs(wt,{fullWidth:!0,size:"small",sx:{mb:2},children:[e.jsx(vt,{id:"nmsc-select-label",children:"Select NMSC"}),e.jsx(Ct,{labelId:"nmsc-select-label",id:"nmsc-select",value:z||"",label:"Select NMSC",onChange:W,sx:{bgcolor:"background.paper"},children:Object.keys(A).map(O=>e.jsx(St,{value:O,children:O},O))})]}),z&&e.jsx(d,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:1,maxHeight:"200px",overflowY:"auto",p:1.5,backgroundColor:b.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":b.palette.grey[50],borderRadius:1,transition:b.transitions.create("background-color"),border:`1px solid ${b.palette.divider}`},children:A[z].map(O=>{var V;return e.jsx(pe,{variant:O===n?"contained":"outlined",size:"small",onClick:()=>o(O),sx:{minHeight:"32px",fontSize:"0.75rem",textTransform:"none"},children:((V=G[O])==null?void 0:V.pretty)||O},O)})})]})})})]})},ys=({selectedOptions:n,handleOptionChange:l,countryLanguageCode:j})=>{const o=le(),h={};return Ue.forEach(C=>{h[C.key]=n[C.key]||C.defaultValue}),e.jsxs(Re,{elevation:1,sx:{p:2,backgroundColor:"background.paper",borderRadius:2,transition:o.transitions.create(["background-color","box-shadow"])},children:[e.jsxs(ye,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[e.jsx(_t,{color:"primary",fontSize:"small"}),e.jsx(E,{variant:"subtitle2",color:"primary",fontWeight:"medium",sx:{flex:1},children:"Component Settings"})]}),e.jsx(ze,{sx:{mb:1.5}}),e.jsx(Wt,{fields:Ue,values:h,countryCode:j,onChange:l,size:"small",showLabels:!0,showDescriptions:!0,layout:"vertical"})]})},js=({progressData:n})=>{const l=le();return e.jsxs(d,{sx:{width:"100%",p:2,borderTop:`1px solid ${l.palette.divider}`,backgroundColor:l.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(E,{variant:"subtitle2",children:"Test Progress"}),e.jsxs(E,{variant:"body2",fontWeight:"medium",children:[n.completion,"% Complete"]})]}),e.jsxs(d,{sx:{height:8,width:"100%",bgcolor:l.palette.grey[200],borderRadius:1,overflow:"hidden",display:"flex"},children:[n.passed>0&&e.jsx(re,{title:`${n.passed} Passed`,children:e.jsx(d,{sx:{height:"100%",width:`${n.passed/n.total*100}%`,bgcolor:l.palette.success.main}})}),n.failed>0&&e.jsx(re,{title:`${n.failed} Failed`,children:e.jsx(d,{sx:{height:"100%",width:`${n.failed/n.total*100}%`,bgcolor:l.palette.error.main}})}),n.blocked>0&&e.jsx(re,{title:`${n.blocked} Blocked`,children:e.jsx(d,{sx:{height:"100%",width:`${n.blocked/n.total*100}%`,bgcolor:l.palette.warning.main}})})]}),e.jsxs(d,{sx:{display:"flex",mt:1,justifyContent:"space-between"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:l.palette.success.main,mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.passed," Passed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:l.palette.error.main,mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.failed," Failed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:l.palette.warning.main,mr:.5}}),e.jsxs(E,{variant:"caption",color:"text.secondary",children:[n.blocked," Blocked"]})]})]})]})},ks=({open:n,onClose:l,themeMode:j,onToggleTheme:o,selectedOptions:h,countryLanguageCode:C,onNextCountry:z,onPrevCountry:D,onChangeCountry:b,onOptionChange:p,progressData:M,urlDisplayComponent:U,frameInfoComponent:A})=>{const N=le(),W=Ye(N.breakpoints.down("md")),O=W?"100%":340;return e.jsxs(Qe,{variant:W?"temporary":"persistent",open:n,sx:{width:n?O:0,flexShrink:0,transition:N.transitions.create("width",{easing:N.transitions.easing.sharp,duration:N.transitions.duration.standard}),"& .MuiDrawer-paper":{width:O,boxSizing:"border-box",position:W?"fixed":"relative",borderRight:`1px solid ${N.palette.divider}`,display:"flex",flexDirection:"column"}},children:[e.jsxs(d,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${N.palette.divider}`,backgroundColor:N.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsxs(ye,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Rt,{color:"primary",fontSize:"small"}),e.jsx(E,{variant:"subtitle1",color:"primary",fontWeight:"medium",children:"Configuration"})]}),e.jsxs(ye,{direction:"row",spacing:1,children:[e.jsx(re,{title:`Switch to ${j==="light"?"dark":"light"} mode`,children:e.jsx(ce,{size:"small",onClick:o,sx:{mr:.5},children:j==="light"?e.jsx(Et,{fontSize:"small"}):e.jsx(It,{fontSize:"small"})})}),e.jsx(ce,{size:"small",onClick:l,children:e.jsx(Xe,{fontSize:"small"})})]})]}),e.jsxs(d,{sx:{p:2,overflowY:"auto",height:"100%",display:"flex",flexDirection:"column",gap:2},children:[U,A,e.jsx(bs,{countryLanguageCode:C,goToNextCountry:z,goToPreviousCountry:D,changeCountry:b}),e.jsx(ys,{selectedOptions:h,handleOptionChange:p,countryLanguageCode:C})]}),M&&M.total>0&&e.jsx(js,{progressData:M})]})},ws=({url:n,onCopy:l})=>{const j=le(),[o,h]=w.useState(!1);return e.jsxs(Re,{elevation:1,sx:{p:2,backgroundColor:"background.paper",borderRadius:2,transition:j.transitions.create(["background-color","box-shadow"])},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(E,{variant:"subtitle2",color:"primary",children:"Generated URL"}),e.jsx(re,{title:"Copy URL",children:e.jsx(ce,{onClick:l,color:"primary",size:"small",sx:{transition:j.transitions.create("transform"),"&:hover":{transform:"scale(1.1)"}},children:e.jsx(Tt,{fontSize:"small"})})})]}),e.jsx(ze,{sx:{mb:1}}),e.jsx(d,{onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),sx:{position:"relative",borderRadius:1,overflow:"hidden",transition:"all 0.25s ease","&:hover":{transform:"translateY(-2px)",boxShadow:j.shadows[2]}},children:e.jsxs(d,{sx:{height:o?"auto":"40px",backgroundColor:j.palette.mode==="dark"?Ae(j.palette.background.paper,.2):j.palette.grey[100],p:1.5,borderRadius:1,transition:j.transitions.create(["background-color","height"],{duration:"0.3s",easing:j.transitions.easing.easeInOut}),"&:hover":{backgroundColor:j.palette.mode==="dark"?Ae(j.palette.background.paper,.3):j.palette.grey[200]}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",opacity:o?0:1,height:o?0:"24px",overflow:"hidden",transition:"all 0.2s ease-in-out"},children:[e.jsx(E,{variant:"caption",sx:{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"},children:n}),e.jsx(zt,{fontSize:"small",color:"action",sx:{opacity:.6,ml:1}})]}),e.jsx(Gt.div,{initial:!1,animate:{opacity:o?1:0,height:o?"auto":0},transition:{duration:.25,ease:"easeInOut"},style:{overflow:"hidden",transformOrigin:"top"},children:e.jsx(E,{variant:"caption",sx:{fontFamily:"monospace",display:"block",width:"100%",wordBreak:"break-all",pt:o?.5:0},children:n})})]})})]})},vs=({isResponsiveMode:n,width:l,height:j,deviceName:o,onToggleResponsiveMode:h,onRotate:C,onOpenSizeMenu:z})=>{const D=le();return e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"40px",px:2,borderBottom:`1px solid ${D.palette.divider}`,backgroundColor:D.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsx(ye,{direction:"row",spacing:1,alignItems:"center",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{color:"primary",fontSize:"small"}),e.jsx(E,{variant:"subtitle2",color:"primary",children:"Responsive Mode"}),e.jsx(Lt,{label:`${Math.round(l)}×${Math.round(j)}`,size:"small",color:"primary",variant:"outlined",sx:{height:"22px",ml:1,fontSize:"0.7rem",fontFamily:"monospace"}}),o&&e.jsx(E,{variant:"caption",color:"text.secondary",sx:{ml:1},children:o})]}):e.jsxs(e.Fragment,{children:[e.jsx(De,{fontSize:"small"}),e.jsx(E,{variant:"subtitle2",children:"Full Size"})]})}),e.jsxs(ye,{direction:"row",spacing:.5,children:[n&&z&&e.jsx(re,{title:"Change device size",children:e.jsx(ce,{size:"small",onClick:z,children:e.jsx(Pe,{fontSize:"small"})})}),n&&C&&e.jsx(re,{title:"Rotate dimensions",children:e.jsx(ce,{size:"small",onClick:C,children:e.jsx(Mt,{fontSize:"small"})})}),e.jsx(re,{title:n?"Exit responsive mode":"Enter responsive mode",children:e.jsx(ce,{size:"small",color:n?"primary":"default",onClick:h,children:e.jsx(De,{fontSize:"small"})})})]})]})},Ve=w.memo(({url:n,isResponsiveMode:l,isLoading:j,width:o,height:h,isResizing:C,onResize:z,onIframeLoad:D,loadingMessage:b="Loading preview...",placeholderContent:p,children:M})=>{const U=le();return e.jsx(d,{sx:{flex:1,position:"relative",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"flex-start",p:l?4:0,backgroundColor:l?U.palette.mode==="dark"?"#121212":"#f5f5f5":"transparent"},children:e.jsxs(d,{sx:{position:"relative",width:l?o:"100%",height:l?h:"100%",boxShadow:l?U.shadows[4]:"none",overflow:"hidden",transition:C?"none":U.transitions.create(["width","height","box-shadow"],{duration:200}),border:l?`1px solid ${U.palette.divider}`:"none"},children:[e.jsx(Vt,{children:j&&e.jsx(Qt,{message:b})}),n?e.jsx("iframe",{src:n,style:{border:"none",width:"100%",height:"100%",display:"block",backgroundColor:U.palette.mode==="dark"?"#1E1E1E":"#FFFFFF"},onLoad:D,title:"Component Preview"}):e.jsx(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:U.palette.text.secondary},children:p||e.jsx(E,{variant:"body2",children:"Please select options to view the preview."})}),l&&e.jsx(Cs,{onResize:z}),M]})})}),Cs=({onResize:n})=>{const l=le(),j={position:"absolute",width:20,height:20,zIndex:100,display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease"},o={width:10,height:10,borderRadius:"50%",backgroundColor:"currentColor",transition:"transform 0.2s ease, box-shadow 0.2s ease",boxShadow:"0 0 0 2px rgba(255, 255, 255, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.2)","&:hover":{transform:"scale(1.5)",boxShadow:"0 0 0 2px rgba(255, 255, 255, 0.8), 0 0 0 1px rgba(0, 0, 0, 0.5)"}},C={color:l.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.5)","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",zIndex:-1},"&:hover":{color:l.palette.primary.main,"&::before":{backgroundColor:"rgba(255, 255, 255, 0.3)"}}};return e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{...j,top:"50%",right:0,transform:"translateY(-50%)",cursor:"ew-resize",...C},onMouseDown:z=>n(z,"e"),children:e.jsx(d,{sx:o})}),e.jsx(d,{sx:{...j,bottom:0,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize",...C},onMouseDown:z=>n(z,"s"),children:e.jsx(d,{sx:o})}),e.jsx(d,{sx:{...j,bottom:0,right:0,cursor:"nwse-resize",...C},onMouseDown:z=>n(z,"se"),children:e.jsx(d,{sx:o})})]})};Ve.displayName="ResponsiveFrameContainer";const Ls=()=>{var T,R;const n=le(),{mode:l,toggleTheme:j}=Xt(),[o,h]=w.useState({total:0,passed:0,failed:0,blocked:0,notTested:0,completion:0}),[C,z]=w.useState(null),{selectedOptions:D,countryLanguageCode:b,generatedUrl:p,notification:M,iframeLoading:U,sidebarOpen:A,frameDimensions:N,isResizing:W,handleOptionChange:O,goToNextCountry:V,goToPreviousCountry:ee,changeCountry:se,copyUrlToClipboard:oe,handleIframeLoad:he,toggleSidebar:de,toggleResponsiveMode:J,handleResize:$,changeDeviceSize:t,rotateDimensions:s}=Jt(),i=w.useCallback(y=>{h(y)},[]),m=w.useCallback(y=>{z(y.currentTarget)},[]),x=w.useCallback(()=>{z(null)},[]),v=p?e.jsx(ws,{url:p,onCopy:oe}):null,k=p?e.jsxs(d,{sx:{p:2,backgroundColor:"background.paper",borderRadius:2,boxShadow:1},children:[e.jsx(E,{variant:"subtitle2",color:"primary",sx:{mb:1},children:"Current Preview"}),e.jsx(d,{sx:{py:.5},children:e.jsx(Kt,{selectedOptions:D,countryLanguageCode:b,maxWidth:280,wrapText:!0})})]}):null;return e.jsxs(d,{sx:{display:"flex",height:"100%",overflow:"hidden"},children:[e.jsx(ks,{open:A,onClose:de,themeMode:l,onToggleTheme:j,selectedOptions:D,countryLanguageCode:b,onNextCountry:V,onPrevCountry:ee,onChangeCountry:se,onOptionChange:O,progressData:o,urlDisplayComponent:v,frameInfoComponent:k}),e.jsxs(d,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",position:"relative",bgcolor:"background.default",transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),...A&&{transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen})}},children:[!A&&e.jsxs(d,{sx:{display:"flex",alignItems:"center",height:"48px",px:1,borderBottom:`1px solid ${n.palette.divider}`,backgroundColor:n.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsx(ce,{onClick:de,size:"small",sx:{mr:1},children:e.jsx(Ot,{fontSize:"small"})}),e.jsx(E,{variant:"subtitle2",sx:{flex:1},children:((T=G[b])==null?void 0:T.pretty)||"Unknown Country"})]}),e.jsxs(d,{sx:{flex:1,position:"relative",overflow:"hidden",width:"100%",height:A?"100%":"calc(100% - 48px)",display:"flex",flexDirection:"column",transition:n.transitions.create(["width","height","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.standard})},children:[e.jsx(vs,{isResponsiveMode:N.isResponsiveMode,width:N.width,height:N.height,deviceName:N.deviceName,onToggleResponsiveMode:J,onRotate:s,onOpenSizeMenu:m}),e.jsx(Ve,{url:p,isResponsiveMode:N.isResponsiveMode,isLoading:U,width:N.width,height:N.height,isResizing:W,onResize:$,onIframeLoad:he,loadingMessage:`Loading ${((R=G[b])==null?void 0:R.pretty)||"Preview"}...`,placeholderContent:e.jsx(E,{variant:"body2",children:"Please select a component and country to view the preview."})})]})]}),e.jsx(gs,{selectedOptions:D,onProgressUpdate:i,handleOptionChange:O}),e.jsx(Ht,{message:M,open:!!M,autoHideDuration:3e3}),e.jsx(qt,{anchorEl:C,currentWidth:N.width,onClose:x,onSelect:t})]})};export{Ls as default};
