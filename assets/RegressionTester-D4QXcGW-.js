import{u as de,j as e,m as st,B as d,n as nt,o as Ue,p as $e,q as De,R as it,d as I,r as ae,I as he,K as rt,t as at,v as Ke,w as Ye,h as fe,x as ot,y as lt,E as Ge,z as dt,G as ct,H as ht,S as xe,J as ut,N as pt,i as xt,O as ft,Q as Qe,g as Ve,b as Xe,U as Je,V as mt,W as Be,X as gt,Y as bt,Z as Ze,_ as yt,P as Le,$ as jt,a0 as vt,a1 as kt,L as wt,a2 as Ct,a3 as Oe,a4 as et,a5 as St,a6 as ve,a7 as ke,a8 as we,f as ie,a9 as _t,aa as Ce,ab as Rt,ac as Et,ad as It,ae as zt,a as Ne,af as Tt,ag as We,ah as Lt,ai as He,aj as Mt,M as Ft}from"./mui-Be33Q-K3.js";import{r as k,h as $t,i as Ot}from"./vendor-By_F_pnL.js";import{c as Y,p as At,g as Ie,a as Pt,b as Ut,d as Dt}from"./index-9eOP6H1w.js";import{d as ze,l as Bt,a as Nt,s as Wt,b as Fe,N as Ht,D as qt,F as Kt}from"./DeviceSizeMenu-PLcf9Flg.js";import{f as Yt}from"./firestore-CvuUZNys.js";import{m as Gt,L as Qt,u as Vt}from"./index-BTN6umcJ.js";import{A as Xt}from"./index-jvwznmng.js";const Jt=()=>{const[n,l]=k.useState(ze),[j,a]=k.useState(0),[c,C]=k.useState(""),[R,F]=k.useState(null),[x,h]=k.useState(!0),[T,$]=k.useState(!0),[U,B]=k.useState(!1),[W,O]=k.useState({width:window.innerWidth-400,height:window.innerHeight-100,isResponsiveMode:!1}),[X,ee]=k.useState(!1),se=Object.keys(Y)[j],oe=(o,r)=>{var D,N,H,Z,_,M,q,S;const b={...o},u=(D=Y[r])==null?void 0:D.hasLexus,f=(N=Y[r])==null?void 0:N.hasStock,p=((H=Y[r])==null?void 0:H.hasUsed)!==!1;return b.brand==="lexus"&&!u&&(i(`Lexus is not available for ${(Z=Y[r])==null?void 0:Z.pretty}, switching to Toyota`),b.brand="toyota"),b.uscContext==="stock"&&!f?p?(i(`Stock Cars is not available for ${(_=Y[r])==null?void 0:_.pretty}, switching to Used Cars`),b.uscContext="used"):i(`Stock Cars is not available for ${(M=Y[r])==null?void 0:M.pretty}`):b.uscContext==="used"&&!p&&(f?(i(`Used Cars is not available for ${(q=Y[r])==null?void 0:q.pretty}, switching to Stock Cars`),b.uscContext="stock"):i(`Used Cars is not available for ${(S=Y[r])==null?void 0:S.pretty}`)),b};k.useEffect(()=>{const o=At();if(Object.keys(o).length>0){const{country:r,nmsc:b,...u}=o;let f=0;if(r){const N=Object.keys(Y).findIndex(H=>H===r);N!==-1&&(f=N)}a(f),l({...ze,...u});const p=Object.keys(Y)[f],D=Ie({...ze,...u},p);C(D),h(!0)}else{const r=Bt();if(r){const b=Object.keys(Y).findIndex(f=>f===r.countryLanguageCode);b!==-1&&a(b),l(r.selectedOptions);const u=Ie(r.selectedOptions,r.countryLanguageCode);C(u),h(!0)}else{const b=Nt();if(b){const u=Object.keys(Y).findIndex(p=>p===b.countryLanguageCode);u!==-1&&a(u),l(b.selectedOptions);const f=Ie(b.selectedOptions,b.countryLanguageCode);C(f),h(!0)}else{const u=Object.keys(Y)[0],f=Ie(ze,u);C(f)}}}B(!0)},[]),k.useEffect(()=>{if(R){const o=setTimeout(()=>{F(null)},3e3);return()=>{clearTimeout(o)}}},[R]),k.useEffect(()=>{U&&(ce(),Wt({selectedOptions:n,countryLanguageCode:se}))},[n,se,U]);const ue=(o,r)=>{const b={...n,[o]:r};h(!0);const u=oe(b,se);l(u),J(u)},ce=()=>{const o=Ie(n,se);C(o)},J=(o,r,b)=>{var D;const u=r||se,f=b||((D=Y[se])==null?void 0:D.nmsc),p=Pt(o,u,f);window.history.pushState({},"",p)},A=()=>{var f;if(j>=Object.keys(Y).length-1){i("No more countries available - can't go forward.");return}h(!0);const o=j+1,r=Object.keys(Y)[o],b=oe(n,r);l(b),a(o);const u=(f=Y[r])==null?void 0:f.nmsc;J(b,r,u)},t=()=>{var f;if(j<=0){i("First country - can't go back.");return}h(!0);const o=j-1,r=Object.keys(Y)[o],b=oe(n,r);l(b),a(o);const u=(f=Y[r])==null?void 0:f.nmsc;J(b,r,u)},s=o=>{var b;const r=Object.keys(Y).findIndex(u=>u===o);if(r!==-1){h(!0);const u=oe(n,o);l(u),a(r);const f=(b=Y[o])==null?void 0:b.nmsc;J(u,o,f)}},i=o=>{F(o)},g=async()=>{try{await navigator.clipboard.writeText(c),i("URL copied to clipboard")}catch{i("Failed to copy URL")}},m=()=>{h(!1)},w=()=>{$(!T)},v=k.useCallback(()=>{O(o=>{if(!o.isResponsiveMode){const r=Fe.find(b=>b.name==="iPhone 12/13/14");return r?{width:r.width,height:r.height,isResponsiveMode:!0,deviceName:r.name}:{width:390,height:844,isResponsiveMode:!0,deviceName:"Mobile"}}return{width:window.innerWidth-(T?400:50),height:window.innerHeight-100,isResponsiveMode:!1}}),i(W.isResponsiveMode?"Exited responsive mode":"Entered responsive mode")},[W.isResponsiveMode,T]),L=k.useCallback((o,r)=>{o.preventDefault(),ee(!0);const b=o.clientX,u=o.clientY,f=W.width,p=W.height,D=H=>{H.preventDefault();let Z=f,_=p;r.includes("e")&&(Z=Math.max(320,f+(H.clientX-b))),r.includes("w")&&(Z=Math.max(320,f-(H.clientX-b))),r.includes("s")&&(_=Math.max(568,p+(H.clientY-u))),r.includes("n")&&(_=Math.max(568,p-(H.clientY-u)));const M=Fe.find(q=>Math.abs(q.width-Z)<=5&&Math.abs(q.height-_)<=5);O({width:Z,height:_,isResponsiveMode:!0,deviceName:M==null?void 0:M.name})},N=()=>{ee(!1),document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",D),document.addEventListener("mouseup",N)},[W.width,W.height]),E=k.useCallback((o,r)=>{const b=Fe.find(u=>u.width===o&&u.height===r);O({width:o,height:r,isResponsiveMode:!0,deviceName:b==null?void 0:b.name}),i(`Changed to ${(b==null?void 0:b.name)||`${o}×${r}`}`)},[]),y=k.useCallback(()=>{O(o=>({width:o.height,height:o.width,isResponsiveMode:o.isResponsiveMode,deviceName:o.deviceName?`${o.deviceName} (Rotated)`:void 0})),i("Rotated dimensions")},[]);return{selectedOptions:n,countryLanguageCode:se,currentCountryIndex:j,generatedUrl:c,notification:R,iframeLoading:x,sidebarOpen:T,frameDimensions:W,isResizing:X,handleOptionChange:ue,goToNextCountry:A,goToPreviousCountry:t,changeCountry:s,copyUrlToClipboard:g,handleIframeLoad:m,toggleSidebar:w,toggleResponsiveMode:v,handleResize:L,changeDeviceSize:E,rotateDimensions:y}},Zt=n=>{const l=n.device||"desktop";return l==="mobile"?`${n.component}-${n.brand}-${n.uscContext}-${l}`:`${n.component}-${n.brand}-${n.uscContext}`},es=async()=>{try{return await Yt()}catch(n){return console.error("Failed to fetch test scenarios:",n),ts()}},ts=()=>({"carFilter-toyota-used":[{id:"car-filter-basic-functionality",title:"Basic Car Filter Functionality",description:"Testing the basic functionality of the car filter component",steps:[{id:"step-1",instruction:"Open the Car Filter component",expectedResult:"You should see 12 results displayed"},{id:"step-2",instruction:"Press the favorites button on any car",expectedResult:"The car should be added to favorites and the button should change state"},{id:"step-3",instruction:"Filter by price range (€10,000 - €20,000)",expectedResult:"Results should update to only show cars within the selected price range"}]}],default:[{id:"default-scenarios",title:"Basic Component Testing",description:"Generic tests that apply to most components",steps:[{id:"step-1",instruction:"Verify component loads correctly",expectedResult:"Component should display without errors"},{id:"step-2",instruction:"Test responsive behavior",expectedResult:"Component should adapt to different screen sizes"}]}]}),ss=async n=>{const l=Zt(n),j=await es();return j[l]||j.default||[]};var Te={exports:{}};/* @license
Papa Parse
v5.5.2
https://github.com/mholt/PapaParse
License: MIT
*/var ns=Te.exports,qe;function is(){return qe||(qe=1,function(n,l){((j,a)=>{n.exports=a()})(ns,function j(){var a=typeof self<"u"?self:typeof window<"u"?window:a!==void 0?a:{},c,C=!a.document&&!!a.postMessage,R=a.IS_PAPA_WORKER||!1,F={},x=0,h={};function T(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(s){var i=ce(s);i.chunkSize=parseInt(i.chunkSize),s.step||s.chunk||(i.chunkSize=null),this._handle=new O(i),(this._handle.streamer=this)._config=i}).call(this,t),this.parseChunk=function(s,i){var g=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<g){let w=this._config.newline;w||(m=this._config.quoteChar||'"',w=this._handle.guessLineEndings(s,m)),s=[...s.split(w).slice(g)].join(w)}this.isFirstChunk&&A(this._config.beforeFirstChunk)&&(m=this._config.beforeFirstChunk(s))!==void 0&&(s=m),this.isFirstChunk=!1,this._halted=!1;var g=this._partialLine+s,m=(this._partialLine="",this._handle.parse(g,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(s=m.meta.cursor,g=(this._finished||(this._partialLine=g.substring(s-this._baseIndex),this._baseIndex=s),m&&m.data&&(this._rowCount+=m.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),R)a.postMessage({results:m,workerId:h.WORKER_ID,finished:g});else if(A(this._config.chunk)&&!i){if(this._config.chunk(m,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=m=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(m.data),this._completeResults.errors=this._completeResults.errors.concat(m.errors),this._completeResults.meta=m.meta),this._completed||!g||!A(this._config.complete)||m&&m.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),g||m&&m.meta.paused||this._nextChunk(),m}this._halted=!0},this._sendError=function(s){A(this._config.error)?this._config.error(s):R&&this._config.error&&a.postMessage({workerId:h.WORKER_ID,error:s,finished:!1})}}function $(t){var s;(t=t||{}).chunkSize||(t.chunkSize=h.RemoteChunkSize),T.call(this,t),this._nextChunk=C?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(s=new XMLHttpRequest,this._config.withCredentials&&(s.withCredentials=this._config.withCredentials),C||(s.onload=J(this._chunkLoaded,this),s.onerror=J(this._chunkError,this)),s.open(this._config.downloadRequestBody?"POST":"GET",this._input,!C),this._config.downloadRequestHeaders){var i,g=this._config.downloadRequestHeaders;for(i in g)s.setRequestHeader(i,g[i])}var m;this._config.chunkSize&&(m=this._start+this._config.chunkSize-1,s.setRequestHeader("Range","bytes="+this._start+"-"+m));try{s.send(this._config.downloadRequestBody)}catch(w){this._chunkError(w.message)}C&&s.status===0&&this._chunkError()}},this._chunkLoaded=function(){s.readyState===4&&(s.status<200||400<=s.status?this._chunkError():(this._start+=this._config.chunkSize||s.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(s),this.parseChunk(s.responseText)))},this._chunkError=function(i){i=s.statusText||i,this._sendError(new Error(i))}}function U(t){(t=t||{}).chunkSize||(t.chunkSize=h.LocalChunkSize),T.call(this,t);var s,i,g=typeof FileReader<"u";this.stream=function(m){this._input=m,i=m.slice||m.webkitSlice||m.mozSlice,g?((s=new FileReader).onload=J(this._chunkLoaded,this),s.onerror=J(this._chunkError,this)):s=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var m=this._input,w=(this._config.chunkSize&&(w=Math.min(this._start+this._config.chunkSize,this._input.size),m=i.call(m,this._start,w)),s.readAsText(m,this._config.encoding));g||this._chunkLoaded({target:{result:w}})},this._chunkLoaded=function(m){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(m.target.result)},this._chunkError=function(){this._sendError(s.error)}}function B(t){var s;T.call(this,t=t||{}),this.stream=function(i){return s=i,this._nextChunk()},this._nextChunk=function(){var i,g;if(!this._finished)return i=this._config.chunkSize,s=i?(g=s.substring(0,i),s.substring(i)):(g=s,""),this._finished=!s,this.parseChunk(g)}}function W(t){T.call(this,t=t||{});var s=[],i=!0,g=!1;this.pause=function(){T.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){T.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(m){this._input=m,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){g&&s.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),s.length?this.parseChunk(s.shift()):i=!0},this._streamData=J(function(m){try{s.push(typeof m=="string"?m:m.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(s.shift()))}catch(w){this._streamError(w)}},this),this._streamError=J(function(m){this._streamCleanUp(),this._sendError(m)},this),this._streamEnd=J(function(){this._streamCleanUp(),g=!0,this._streamData("")},this),this._streamCleanUp=J(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function O(t){var s,i,g,m,w=Math.pow(2,53),v=-w,L=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,E=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,o=0,r=0,b=!1,u=!1,f=[],p={data:[],errors:[],meta:{}};function D(_){return t.skipEmptyLines==="greedy"?_.join("").trim()==="":_.length===1&&_[0].length===0}function N(){if(p&&g&&(Z("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+h.DefaultDelimiter+"'"),g=!1),t.skipEmptyLines&&(p.data=p.data.filter(function(S){return!D(S)})),H()){let S=function(V,te){A(t.transformHeader)&&(V=t.transformHeader(V,te)),f.push(V)};if(p)if(Array.isArray(p.data[0])){for(var _=0;H()&&_<p.data.length;_++)p.data[_].forEach(S);p.data.splice(0,1)}else p.data.forEach(S)}function M(S,V){for(var te=t.header?{}:[],K=0;K<S.length;K++){var G=K,P=S[K],P=((pe,z)=>(Q=>(t.dynamicTypingFunction&&t.dynamicTyping[Q]===void 0&&(t.dynamicTyping[Q]=t.dynamicTypingFunction(Q)),(t.dynamicTyping[Q]||t.dynamicTyping)===!0))(pe)?z==="true"||z==="TRUE"||z!=="false"&&z!=="FALSE"&&((Q=>{if(L.test(Q)&&(Q=parseFloat(Q),v<Q&&Q<w))return 1})(z)?parseFloat(z):E.test(z)?new Date(z):z===""?null:z):z)(G=t.header?K>=f.length?"__parsed_extra":f[K]:G,P=t.transform?t.transform(P,G):P);G==="__parsed_extra"?(te[G]=te[G]||[],te[G].push(P)):te[G]=P}return t.header&&(K>f.length?Z("FieldMismatch","TooManyFields","Too many fields: expected "+f.length+" fields but parsed "+K,r+V):K<f.length&&Z("FieldMismatch","TooFewFields","Too few fields: expected "+f.length+" fields but parsed "+K,r+V)),te}var q;p&&(t.header||t.dynamicTyping||t.transform)&&(q=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(M),q=p.data.length):p.data=M(p.data,0),t.header&&p.meta&&(p.meta.fields=f),r+=q)}function H(){return t.header&&f.length===0}function Z(_,M,q,S){_={type:_,code:M,message:q},S!==void 0&&(_.row=S),p.errors.push(_)}A(t.step)&&(m=t.step,t.step=function(_){p=_,H()?N():(N(),p.data.length!==0&&(o+=_.data.length,t.preview&&o>t.preview?i.abort():(p.data=p.data[0],m(p,y))))}),this.parse=function(_,M,q){var S=t.quoteChar||'"',S=(t.newline||(t.newline=this.guessLineEndings(_,S)),g=!1,t.delimiter?A(t.delimiter)&&(t.delimiter=t.delimiter(_),p.meta.delimiter=t.delimiter):((S=((V,te,K,G,P)=>{var pe,z,Q,je;P=P||[",","	","|",";",h.RECORD_SEP,h.UNIT_SEP];for(var Se=0;Se<P.length;Se++){for(var me,Re=P[Se],re=0,ge=0,ne=0,le=(Q=void 0,new ee({comments:G,delimiter:Re,newline:te,preview:10}).parse(V)),ye=0;ye<le.data.length;ye++)K&&D(le.data[ye])?ne++:(me=le.data[ye].length,ge+=me,Q===void 0?Q=me:0<me&&(re+=Math.abs(me-Q),Q=me));0<le.data.length&&(ge/=le.data.length-ne),(z===void 0||re<=z)&&(je===void 0||je<ge)&&1.99<ge&&(z=re,pe=Re,je=ge)}return{successful:!!(t.delimiter=pe),bestDelimiter:pe}})(_,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess)).successful?t.delimiter=S.bestDelimiter:(g=!0,t.delimiter=h.DefaultDelimiter),p.meta.delimiter=t.delimiter),ce(t));return t.preview&&t.header&&S.preview++,s=_,i=new ee(S),p=i.parse(s,M,q),N(),b?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return b},this.pause=function(){b=!0,i.abort(),s=A(t.chunk)?"":s.substring(i.getCharIndex())},this.resume=function(){y.streamer._halted?(b=!1,y.streamer.parseChunk(s,!0)):setTimeout(y.resume,3)},this.aborted=function(){return u},this.abort=function(){u=!0,i.abort(),p.meta.aborted=!0,A(t.complete)&&t.complete(p),s=""},this.guessLineEndings=function(V,S){V=V.substring(0,1048576);var S=new RegExp(X(S)+"([^]*?)"+X(S),"gm"),q=(V=V.replace(S,"")).split("\r"),S=V.split(`
`),V=1<S.length&&S[0].length<q[0].length;if(q.length===1||V)return`
`;for(var te=0,K=0;K<q.length;K++)q[K][0]===`
`&&te++;return te>=q.length/2?`\r
`:"\r"}}function X(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ee(t){var s=(t=t||{}).delimiter,i=t.newline,g=t.comments,m=t.step,w=t.preview,v=t.fastMode,L=null,E=!1,y=t.quoteChar==null?'"':t.quoteChar,o=y;if(t.escapeChar!==void 0&&(o=t.escapeChar),(typeof s!="string"||-1<h.BAD_DELIMITERS.indexOf(s))&&(s=","),g===s)throw new Error("Comment character same as delimiter");g===!0?g="#":(typeof g!="string"||-1<h.BAD_DELIMITERS.indexOf(g))&&(g=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var r=0,b=!1;this.parse=function(u,f,p){if(typeof u!="string")throw new Error("Input must be a string");var D=u.length,N=s.length,H=i.length,Z=g.length,_=A(m),M=[],q=[],S=[],V=r=0;if(!u)return re();if(v||v!==!1&&u.indexOf(y)===-1){for(var te=u.split(i),K=0;K<te.length;K++){if(S=te[K],r+=S.length,K!==te.length-1)r+=i.length;else if(p)return re();if(!g||S.substring(0,Z)!==g){if(_){if(M=[],je(S.split(s)),ge(),b)return re()}else je(S.split(s));if(w&&w<=K)return M=M.slice(0,w),re(!0)}}return re()}for(var G=u.indexOf(s,r),P=u.indexOf(i,r),pe=new RegExp(X(o)+X(y),"g"),z=u.indexOf(y,r);;)if(u[r]===y)for(z=r,r++;;){if((z=u.indexOf(y,z+1))===-1)return p||q.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:M.length,index:r}),me();if(z===D-1)return me(u.substring(r,z).replace(pe,y));if(y===o&&u[z+1]===o)z++;else if(y===o||z===0||u[z-1]!==o){G!==-1&&G<z+1&&(G=u.indexOf(s,z+1));var Q=Se((P=P!==-1&&P<z+1?u.indexOf(i,z+1):P)===-1?G:Math.min(G,P));if(u.substr(z+1+Q,N)===s){S.push(u.substring(r,z).replace(pe,y)),u[r=z+1+Q+N]!==y&&(z=u.indexOf(y,r)),G=u.indexOf(s,r),P=u.indexOf(i,r);break}if(Q=Se(P),u.substring(z+1+Q,z+1+Q+H)===i){if(S.push(u.substring(r,z).replace(pe,y)),Re(z+1+Q+H),G=u.indexOf(s,r),z=u.indexOf(y,r),_&&(ge(),b))return re();if(w&&M.length>=w)return re(!0);break}q.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:M.length,index:r}),z++}}else if(g&&S.length===0&&u.substring(r,r+Z)===g){if(P===-1)return re();r=P+H,P=u.indexOf(i,r),G=u.indexOf(s,r)}else if(G!==-1&&(G<P||P===-1))S.push(u.substring(r,G)),r=G+N,G=u.indexOf(s,r);else{if(P===-1)break;if(S.push(u.substring(r,P)),Re(P+H),_&&(ge(),b))return re();if(w&&M.length>=w)return re(!0)}return me();function je(ne){M.push(ne),V=r}function Se(ne){var le=0;return le=ne!==-1&&(ne=u.substring(z+1,ne))&&ne.trim()===""?ne.length:le}function me(ne){return p||(ne===void 0&&(ne=u.substring(r)),S.push(ne),r=D,je(S),_&&ge()),re()}function Re(ne){r=ne,je(S),S=[],P=u.indexOf(i,r)}function re(ne){if(t.header&&!f&&M.length&&!E){var le=M[0],ye={},Me=new Set(le);let Ae=!1;for(let _e=0;_e<le.length;_e++){let be=le[_e];if(ye[be=A(t.transformHeader)?t.transformHeader(be,_e):be]){let Ee,Pe=ye[be];for(;Ee=be+"_"+Pe,Pe++,Me.has(Ee););Me.add(Ee),le[_e]=Ee,ye[be]++,Ae=!0,(L=L===null?{}:L)[Ee]=be}else ye[be]=1,le[_e]=be;Me.add(be)}Ae&&console.warn("Duplicate headers found and renamed."),E=!0}return{data:M,errors:q,meta:{delimiter:s,linebreak:i,aborted:b,truncated:!!ne,cursor:V+(f||0),renamedHeaders:L}}}function ge(){m(re()),M=[],q=[]}},this.abort=function(){b=!0},this.getCharIndex=function(){return r}}function se(t){var s=t.data,i=F[s.workerId],g=!1;if(s.error)i.userError(s.error,s.file);else if(s.results&&s.results.data){var m={abort:function(){g=!0,oe(s.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ue,resume:ue};if(A(i.userStep)){for(var w=0;w<s.results.data.length&&(i.userStep({data:s.results.data[w],errors:s.results.errors,meta:s.results.meta},m),!g);w++);delete s.results}else A(i.userChunk)&&(i.userChunk(s.results,m,s.file),delete s.results)}s.finished&&!g&&oe(s.workerId,s.results)}function oe(t,s){var i=F[t];A(i.userComplete)&&i.userComplete(s),i.terminate(),delete F[t]}function ue(){throw new Error("Not implemented.")}function ce(t){if(typeof t!="object"||t===null)return t;var s,i=Array.isArray(t)?[]:{};for(s in t)i[s]=ce(t[s]);return i}function J(t,s){return function(){t.apply(s,arguments)}}function A(t){return typeof t=="function"}return h.parse=function(t,s){var i=(s=s||{}).dynamicTyping||!1;if(A(i)&&(s.dynamicTypingFunction=i,i={}),s.dynamicTyping=i,s.transform=!!A(s.transform)&&s.transform,!s.worker||!h.WORKERS_SUPPORTED)return i=null,h.NODE_STREAM_INPUT,typeof t=="string"?(t=(g=>g.charCodeAt(0)!==65279?g:g.slice(1))(t),i=new(s.download?$:B)(s)):t.readable===!0&&A(t.read)&&A(t.on)?i=new W(s):(a.File&&t instanceof File||t instanceof Object)&&(i=new U(s)),i.stream(t);(i=(()=>{var g;return!!h.WORKERS_SUPPORTED&&(g=(()=>{var m=a.URL||a.webkitURL||null,w=j.toString();return h.BLOB_URL||(h.BLOB_URL=m.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",w,")();"],{type:"text/javascript"})))})(),(g=new a.Worker(g)).onmessage=se,g.id=x++,F[g.id]=g)})()).userStep=s.step,i.userChunk=s.chunk,i.userComplete=s.complete,i.userError=s.error,s.step=A(s.step),s.chunk=A(s.chunk),s.complete=A(s.complete),s.error=A(s.error),delete s.worker,i.postMessage({input:t,config:s,workerId:i.id})},h.unparse=function(t,s){var i=!1,g=!0,m=",",w=`\r
`,v='"',L=v+v,E=!1,y=null,o=!1,r=((()=>{if(typeof s=="object"){if(typeof s.delimiter!="string"||h.BAD_DELIMITERS.filter(function(f){return s.delimiter.indexOf(f)!==-1}).length||(m=s.delimiter),typeof s.quotes!="boolean"&&typeof s.quotes!="function"&&!Array.isArray(s.quotes)||(i=s.quotes),typeof s.skipEmptyLines!="boolean"&&typeof s.skipEmptyLines!="string"||(E=s.skipEmptyLines),typeof s.newline=="string"&&(w=s.newline),typeof s.quoteChar=="string"&&(v=s.quoteChar),typeof s.header=="boolean"&&(g=s.header),Array.isArray(s.columns)){if(s.columns.length===0)throw new Error("Option columns is empty");y=s.columns}s.escapeChar!==void 0&&(L=s.escapeChar+v),s.escapeFormulae instanceof RegExp?o=s.escapeFormulae:typeof s.escapeFormulae=="boolean"&&s.escapeFormulae&&(o=/^[=+\-@\t\r].*$/)}})(),new RegExp(X(v),"g"));if(typeof t=="string"&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return b(null,t,E);if(typeof t[0]=="object")return b(y||Object.keys(t[0]),t,E)}else if(typeof t=="object")return typeof t.data=="string"&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields||y),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:typeof t.data[0]=="object"?Object.keys(t.data[0]):[]),Array.isArray(t.data[0])||typeof t.data[0]=="object"||(t.data=[t.data])),b(t.fields||[],t.data||[],E);throw new Error("Unable to serialize unrecognized input");function b(f,p,D){var N="",H=(typeof f=="string"&&(f=JSON.parse(f)),typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(f)&&0<f.length),Z=!Array.isArray(p[0]);if(H&&g){for(var _=0;_<f.length;_++)0<_&&(N+=m),N+=u(f[_],_);0<p.length&&(N+=w)}for(var M=0;M<p.length;M++){var q=(H?f:p[M]).length,S=!1,V=H?Object.keys(p[M]).length===0:p[M].length===0;if(D&&!H&&(S=D==="greedy"?p[M].join("").trim()==="":p[M].length===1&&p[M][0].length===0),D==="greedy"&&H){for(var te=[],K=0;K<q;K++){var G=Z?f[K]:K;te.push(p[M][G])}S=te.join("").trim()===""}if(!S){for(var P=0;P<q;P++){0<P&&!V&&(N+=m);var pe=H&&Z?f[P]:P;N+=u(p[M][pe],P)}M<p.length-1&&(!D||0<q&&!V)&&(N+=w)}}return N}function u(f,p){var D,N;return f==null?"":f.constructor===Date?JSON.stringify(f).slice(1,25):(N=!1,o&&typeof f=="string"&&o.test(f)&&(f="'"+f,N=!0),D=f.toString().replace(r,L),(N=N||i===!0||typeof i=="function"&&i(f,p)||Array.isArray(i)&&i[p]||((H,Z)=>{for(var _=0;_<Z.length;_++)if(-1<H.indexOf(Z[_]))return!0;return!1})(D,h.BAD_DELIMITERS)||-1<D.indexOf(m)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?v+D+v:D)}},h.RECORD_SEP="",h.UNIT_SEP="",h.BYTE_ORDER_MARK="\uFEFF",h.BAD_DELIMITERS=["\r",`
`,'"',h.BYTE_ORDER_MARK],h.WORKERS_SUPPORTED=!C&&!!a.Worker,h.NODE_STREAM_INPUT=1,h.LocalChunkSize=10485760,h.RemoteChunkSize=5242880,h.DefaultDelimiter=",",h.Parser=ee,h.ParserHandle=O,h.NetworkStreamer=$,h.FileStreamer=U,h.StringStreamer=B,h.ReadableStreamStreamer=W,a.jQuery&&((c=a.jQuery).fn.parse=function(t){var s=t.config||{},i=[];return this.each(function(w){if(!(c(this).prop("tagName").toUpperCase()==="INPUT"&&c(this).attr("type").toLowerCase()==="file"&&a.FileReader)||!this.files||this.files.length===0)return!0;for(var v=0;v<this.files.length;v++)i.push({file:this.files[v],inputElem:this,instanceConfig:c.extend({},s)})}),g(),this;function g(){if(i.length===0)A(t.complete)&&t.complete();else{var w,v,L,E,y=i[0];if(A(t.before)){var o=t.before(y.file,y.inputElem);if(typeof o=="object"){if(o.action==="abort")return w="AbortError",v=y.file,L=y.inputElem,E=o.reason,void(A(t.error)&&t.error({name:w},v,L,E));if(o.action==="skip")return void m();typeof o.config=="object"&&(y.instanceConfig=c.extend(y.instanceConfig,o.config))}else if(o==="skip")return void m()}var r=y.instanceConfig.complete;y.instanceConfig.complete=function(b){A(r)&&r(b,y.file,y.inputElem),m()},h.parse(y.file,y.instanceConfig)}}function m(){i.splice(0,1),g()}}),R&&(a.onmessage=function(t){t=t.data,h.WORKER_ID===void 0&&t&&(h.WORKER_ID=t.workerId),typeof t.input=="string"?a.postMessage({workerId:h.WORKER_ID,results:h.parse(t.input,t.config),finished:!0}):(a.File&&t.input instanceof File||t.input instanceof Object)&&(t=h.parse(t.input,t.config))&&a.postMessage({workerId:h.WORKER_ID,results:t,finished:!0})}),($.prototype=Object.create(T.prototype)).constructor=$,(U.prototype=Object.create(T.prototype)).constructor=U,(B.prototype=Object.create(B.prototype)).constructor=B,(W.prototype=Object.create(T.prototype)).constructor=W,h})}(Te)),Te.exports}var rs=is();const as=$t(rs),os=({selectedOptions:n,onProgressUpdate:l})=>{const[j,a]=k.useState(null),[c,C]=k.useState({}),[R,F]=k.useState({}),[x,h]=k.useState([]),[T,$]=k.useState(!1),[U,B]=k.useState(!1),[W,O]=k.useState(null),[X,ee]=k.useState(null);k.useEffect(()=>{if(X){const v=setTimeout(()=>{ee(null)},2e3);return()=>clearTimeout(v)}},[X]);const se=k.useCallback(async()=>{$(!0),O(null);try{const v=await ss(n);console.log("Fetched scenarios:",v),h(v)}catch(v){console.error("Failed to fetch test scenarios:",v),O("Failed to load test instructions. Please try again later.")}finally{$(!1)}},[n]);k.useEffect(()=>{U&&se()},[se,U]);const oe=k.useCallback((v,L)=>{let E=0,y=0,o=0,r=0;v.forEach(f=>{f.steps.forEach(p=>{E++;const D=`${f.id}-${p.id}`,N=L[D];N==="pass"?y++:N==="fail"?o++:N==="blocked"&&r++})});const b=E-y-o-r,u=E===0?0:Math.round((y+o+r)/E*100);return{total:E,passed:y,failed:o,blocked:r,notTested:b,completion:u}},[]),ue=k.useCallback((v,L)=>{if(L.length===0)return{completion:0,passed:0,failed:0,blocked:0};let E=0,y=0,o=0,r=0;return L.forEach(u=>{const f=`${v}-${u.id}`,p=c[f];p&&(E++,p==="pass"?y++:p==="fail"?o++:p==="blocked"&&r++)}),{completion:Math.round(E/L.length*100),passed:y,failed:o,blocked:r}},[c]),ce=k.useCallback((v,L,E)=>{const y=`${v}-${L}`;C(o=>{if(o[y]===E){const r={...o};return delete r[y],r}return{...o,[y]:E}}),ee(`Step ${E==="pass"?"passed":E==="fail"?"failed":"blocked"}`)},[]),J=k.useCallback((v,L,E)=>{C(y=>{const o={...y};return L.forEach(r=>{const b=`${v}-${r.id}`;y[b]!==E&&(o[b]=E)}),o}),ee(`All steps marked as ${E==="pass"?"passed":E==="fail"?"failed":"blocked"}`)},[]),A=k.useCallback(v=>{F(L=>({...L,[v]:!L[v]}))},[]),t=k.useCallback(v=>{a(L=>L===v?null:v)},[]),s=k.useCallback((v,L)=>{C(E=>{const y={...E};return L.forEach(o=>{const r=`${v}-${o.id}`;delete y[r]}),y}),ee("Reset all steps in this scenario")},[]),i=k.useCallback(()=>{B(v=>!v)},[]),g=k.useCallback(()=>{const v=new Date().toISOString().replace(/[:.]/g,"-"),L=`test-results-${n.component||"unknown"}-${n.brand||"unknown"}-${n.uscContext||"unknown"}-${v}.csv`,E=[];E.push(["Component","Brand","Context","Scenario","StepID","Instruction","Expected Result","Status","Notes"]),x.forEach(u=>{u.steps.forEach(f=>{const p=`${u.id}-${f.id}`,D=c[p]||"not-tested";E.push([n.component||"unknown",n.brand||"unknown",n.uscContext||"unknown",u.title,f.id,f.instruction,f.expectedResult,D,""])})});const y=as.unparse(E,{quotes:!0,quoteChar:'"',escapeChar:'"',delimiter:",",header:!1,newline:`
`}),o=new Blob([y],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),b=URL.createObjectURL(o);r.href=b,r.setAttribute("download",L),document.body.appendChild(r),r.click(),document.body.removeChild(r),ee(`Exported results to ${L}`)},[x,c,n]),m=k.useMemo(()=>oe(x,c),[x,c,oe]);k.useEffect(()=>{l&&l(m)},[m,l]);const w=k.useCallback(()=>(ee("Opening printable test report..."),{selectedOptions:n,stepStatuses:c}),[n,c]);return{expandedScenario:j,stepStatuses:c,showExpectedResults:R,scenarios:x,loading:T,sidebarOpen:U,error:W,notification:X,progressData:m,toggleSidebar:i,toggleExpectedResult:A,handleAccordionChange:t,setStepStatus:ce,markAllSteps:J,resetScenario:s,exportTestResults:g,openPrintableReport:w,getScenarioProgress:ue,fetchScenarios:se,setNotification:ee}},ls=({scenario:n,step:l,index:j,showExpected:a,status:c,onToggleExpected:C,onSetStatus:R,getStatusColor:F})=>{const x=de();return e.jsx(st,{sx:{display:"block",py:1.5,px:2,borderBottom:"1px solid ${theme.palette.divider}","&:hover":{backgroundColor:x.palette.mode==="dark"?"rgba(255, 255, 255, 0.03)":"rgba(0, 0, 0, 0.01)"},borderLeft:c?`3px solid ${F(c)}`:"none",ml:c?0:"3px",transition:"all 0.2s ease"},children:e.jsxs(d,{sx:{display:"flex",alignItems:"flex-start"},children:[e.jsx(nt,{sx:{minWidth:36,mt:.5},children:c?e.jsx(d,{sx:{width:24,height:24,borderRadius:"50%",bgcolor:F(c),display:"flex",alignItems:"center",justifyContent:"center",color:"#fff",fontSize:14,boxShadow:x.shadows[1],transition:"transform 0.2s ease","&:hover":{transform:"scale(1.1)"}},children:c==="pass"?e.jsx(Ue,{sx:{fontSize:16}}):c==="fail"?e.jsx($e,{sx:{fontSize:16}}):e.jsx(De,{sx:{fontSize:16}})}):e.jsx(d,{sx:{width:24,height:24,borderRadius:"50%",border:`2px solid ${x.palette.divider}`,display:"flex",alignItems:"center",justifyContent:"center",color:x.palette.text.disabled,transition:"all 0.2s ease","&:hover":{borderColor:x.palette.primary.main,color:x.palette.primary.main}},children:e.jsx(it,{sx:{fontSize:16}})})}),e.jsxs(d,{sx:{flex:1},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"flex-start",mb:.5,position:"relative"},children:[e.jsxs(I,{variant:"body2",component:"div",sx:{flex:1,fontWeight:c?"normal":"medium",color:c==="blocked"?x.palette.text.disabled:"inherit",textDecoration:c==="blocked"?"line-through":"none",cursor:"default",transition:"color 0.2s ease",lineHeight:1.5,"&:hover":{color:x.palette.primary.main}},children:[e.jsxs(d,{component:"span",sx:{mr:1,color:x.palette.text.secondary,fontSize:"0.8rem",opacity:.7},children:[j+1,"."]}),l.instruction]}),e.jsx(ae,{title:a?"Hide expected result":"Show expected result",children:e.jsx(he,{size:"small",onClick:()=>C(l.id),sx:{ml:1,mt:-.5,color:a?x.palette.primary.main:x.palette.text.secondary,transition:"all 0.2s ease",backgroundColor:a?x.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)":"transparent","&:hover":{backgroundColor:x.palette.mode==="dark"?"rgba(255, 255, 255, 0.12)":"rgba(0, 0, 0, 0.08)"}},children:a?e.jsx(rt,{fontSize:"small"}):e.jsx(at,{fontSize:"small"})})})]}),e.jsx(Ke,{in:a,children:e.jsxs(d,{sx:{ml:0,mt:1,mb:1,p:1.5,backgroundColor:x.palette.mode==="dark"?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)",borderRadius:1,border:`1px solid ${x.palette.divider}`,transition:"all 0.3s ease",position:"relative","&:before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:3,backgroundColor:c==="fail"?x.palette.error.main:c==="pass"?x.palette.success.main:x.palette.info.main,borderTopLeftRadius:4,borderBottomLeftRadius:4},boxShadow:x.shadows[1]},children:[e.jsx(I,{variant:"caption",component:"div",sx:{fontWeight:"bold",mb:.5,display:"flex",alignItems:"center"},children:e.jsx("span",{children:"Expected Result:"})}),e.jsx(I,{variant:"body2",component:"div",sx:{color:c==="fail"?x.palette.error.main:c==="pass"?x.palette.success.main:"inherit",fontStyle:"italic",pl:.5,lineHeight:1.5},children:l.expectedResult})]})}),e.jsx(d,{sx:{display:"flex",mt:1.5,justifyContent:"flex-start"},children:e.jsxs(Ye,{size:"small",variant:"outlined",sx:{boxShadow:x.shadows[1],".MuiButton-root":{transition:"all 0.2s ease"}},children:[e.jsx(ae,{title:"Mark as Passed",children:e.jsx(fe,{color:"success",onClick:()=>R(n.id,l.id,"pass"),variant:c==="pass"?"contained":"outlined",sx:{minWidth:"40px",px:1,"&.MuiButton-contained":{boxShadow:x.shadows[2]},"&:hover":{transform:"translateY(-1px)",boxShadow:x.shadows[3]}},children:e.jsx(Ue,{fontSize:"small"})})}),e.jsx(ae,{title:"Mark as Failed",children:e.jsx(fe,{color:"error",onClick:()=>R(n.id,l.id,"fail"),variant:c==="fail"?"contained":"outlined",sx:{minWidth:"40px",px:1,"&.MuiButton-contained":{boxShadow:x.shadows[2]},"&:hover":{transform:"translateY(-1px)",boxShadow:x.shadows[3]}},children:e.jsx($e,{fontSize:"small"})})}),e.jsx(ae,{title:"Mark as Blocked",children:e.jsx(fe,{color:"warning",onClick:()=>R(n.id,l.id,"blocked"),variant:c==="blocked"?"contained":"outlined",sx:{minWidth:"40px",px:1,"&.MuiButton-contained":{boxShadow:x.shadows[2]},"&:hover":{transform:"translateY(-1px)",boxShadow:x.shadows[3]}},children:e.jsx(De,{fontSize:"small"})})})]})})]})]})},l.id)},ds=k.memo(ls,(n,l)=>n.status===l.status&&n.showExpected===l.showExpected&&n.index===l.index),cs=({completion:n,passed:l,failed:j,blocked:a,steps:c})=>{const C=de();return e.jsxs(d,{sx:{display:"flex",alignItems:"center",mt:.5},children:[e.jsxs(d,{sx:{height:4,width:60,bgcolor:C.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)",borderRadius:1,mr:1,overflow:"hidden",display:"flex"},children:[l>0&&e.jsx(d,{sx:{height:"100%",width:`${l/c.length*100}%`,bgcolor:C.palette.success.main}}),j>0&&e.jsx(d,{sx:{height:"100%",width:`${j/c.length*100}%`,bgcolor:C.palette.error.main}}),a>0&&e.jsx(d,{sx:{height:"100%",width:`${a/c.length*100}%`,bgcolor:C.palette.warning.main}})]}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n,"% complete"]})]})},hs=({scenario:n,expanded:l,stepStatuses:j,showExpectedResults:a,onResetScenario:c,onToggleAccordion:C,onToggleExpected:R,onSetStatus:F,onMarkAllSteps:x,getStatusColor:h,scenarioProgress:T})=>{const $=de();return e.jsxs(ot,{expanded:l,onChange:()=>C(n.id),disableGutters:!0,elevation:0,sx:{"&:before":{display:"none"},borderBottom:`1px solid ${$.palette.divider}`},children:[e.jsx(lt,{expandIcon:e.jsx(Ge,{}),sx:{px:3,minHeight:"56px !important",backgroundColor:l?$.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)":"transparent","&:hover":{backgroundColor:$.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}},children:e.jsx(d,{sx:{display:"flex",alignItems:"center",width:"100%"},children:e.jsxs(d,{sx:{flexGrow:1},children:[e.jsx(I,{variant:"subtitle2",fontWeight:"medium",children:n.title}),e.jsx(cs,{completion:T.completion,passed:T.passed,failed:T.failed,blocked:T.blocked,steps:n.steps})]})})}),l&&e.jsxs(d,{sx:{borderBottom:`1px solid ${$.palette.divider}`,backgroundColor:$.palette.mode==="dark"?"rgba(255, 255, 255, 0.04)":"rgba(0, 0, 0, 0.02)",display:"flex",flexDirection:{xs:"column",sm:"row"},justifyContent:"space-between",alignItems:"center",gap:2,px:3,py:1.5},children:[e.jsx(fe,{size:"small",onClick:U=>{U.stopPropagation(),c(n.id,n.steps)},variant:"outlined",color:"inherit",startIcon:e.jsx($e,{fontSize:"small"}),sx:{fontSize:"0.75rem",borderRadius:1,textTransform:"none",px:1.5,py:.5,minHeight:0,minWidth:0,"&:hover":{backgroundColor:$.palette.mode==="dark"?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.08)"}},children:"Reset all steps"}),e.jsx(Ye,{size:"small",variant:"outlined",children:e.jsx(fe,{onClick:U=>{U.stopPropagation(),x==null||x(n.id,n.steps,"pass")},color:"success",startIcon:e.jsx(dt,{fontSize:"small"}),sx:{fontSize:"0.75rem",textTransform:"none",px:1.5,py:.5,minHeight:0},children:"Mark all passed"})})]}),e.jsx(ct,{sx:{p:0},children:e.jsx(ht,{disablePadding:!0,children:n.steps.map((U,B)=>{const W=`${n.id}-${U.id}`,O=j[W],X=a[U.id]||!1;return e.jsx(ds,{scenario:n,step:U,index:B,status:O,showExpected:X,onToggleExpected:R,onSetStatus:F,getStatusColor:h},U.id)})})})]})},us=k.memo(hs,(n,l)=>n.expanded===l.expanded&&n.scenarioProgress.completion===l.scenarioProgress.completion&&n.scenarioProgress.passed===l.scenarioProgress.passed&&n.scenarioProgress.failed===l.scenarioProgress.failed&&n.scenarioProgress.blocked===l.scenarioProgress.blocked),ps=({progressData:n,onExportResults:l,onViewPrintableReport:j,hasScenarios:a})=>{const c=de();return e.jsxs(d,{sx:{padding:3,borderBottom:`1px solid ${c.palette.divider}`},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(I,{variant:"subtitle2",color:"text.secondary",children:"Overall Progress"}),e.jsxs(I,{variant:"body2",fontWeight:"medium",children:[n.completion,"% Complete"]})]}),e.jsxs(d,{sx:{height:8,width:"100%",bgcolor:c.palette.grey[200],borderRadius:1,overflow:"hidden",display:"flex"},children:[n.passed>0&&e.jsx(d,{sx:{height:"100%",width:`${n.passed/n.total*100}%`,bgcolor:c.palette.success.main}}),n.failed>0&&e.jsx(d,{sx:{height:"100%",width:`${n.failed/n.total*100}%`,bgcolor:c.palette.error.main}}),n.blocked>0&&e.jsx(d,{sx:{height:"100%",width:`${n.blocked/n.total*100}%`,bgcolor:c.palette.warning.main}})]}),e.jsxs(d,{sx:{display:"flex",mt:1,justifyContent:"space-between"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:c.palette.success.main,mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.passed," Passed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:c.palette.error.main,mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.failed," Failed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:c.palette.warning.main,mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.blocked," Blocked"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:c.palette.grey[300],mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.notTested," Not Tested"]})]})]}),a&&e.jsxs(xe,{spacing:1,sx:{mt:2},children:[e.jsx(fe,{variant:"outlined",fullWidth:!0,size:"small",startIcon:e.jsx(ut,{}),onClick:l,children:"Export Results to CSV"}),j&&e.jsx(fe,{variant:"outlined",fullWidth:!0,size:"small",color:"primary",startIcon:e.jsx(pt,{}),onClick:j,children:"View Printable Report"})]})]})},xs=({selectedOptions:n,onManageTestCases:l})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:4,textAlign:"center"},children:[e.jsx(Ve,{color:"disabled",sx:{fontSize:48,mb:2,opacity:.5}}),e.jsx(I,{variant:"h6",gutterBottom:!0,children:"No test scenarios found"}),e.jsxs(I,{variant:"body2",color:"text.secondary",sx:{mb:3,maxWidth:500},children:["There are no test scenarios for"," ",e.jsxs("strong",{children:[n.component," - ",n.brand," -"," ",n.uscContext]}),". Use the Test Case Management page to add scenarios and test steps."]}),e.jsx(fe,{variant:"contained",size:"small",startIcon:e.jsx(Qe,{}),onClick:l,children:"Manage Test Cases"})]}),fs=({message:n="Loading test instructions..."})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:4},children:[e.jsx(xt,{size:40,sx:{mb:2}}),e.jsx(I,{variant:"body2",color:"text.secondary",children:n})]}),ms=({error:n,onRetry:l,onManageTestCases:j})=>e.jsxs(d,{sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:4},children:[e.jsx(ft,{severity:"error",sx:{mb:2,width:"100%",maxWidth:500},children:n}),e.jsx(I,{variant:"body2",color:"text.secondary",sx:{mb:2,textAlign:"center"},children:"There was a problem loading the test instructions. You may need to create test scenarios using the Test Case Management page."}),e.jsxs(d,{sx:{display:"flex",gap:1},children:[e.jsx(fe,{variant:"outlined",size:"small",onClick:j,startIcon:e.jsx(Qe,{}),children:"Manage Test Cases"}),e.jsx(fe,{variant:"contained",size:"small",onClick:l,children:"Retry"})]})]}),gs=({selectedOptions:n,onProgressUpdate:l,handleOptionChange:j})=>{const a=de(),c=Ot(),C=Xe(a.breakpoints.down("md")),{expandedScenario:R,stepStatuses:F,showExpectedResults:x,scenarios:h,loading:T,sidebarOpen:$,error:U,notification:B,progressData:W,toggleSidebar:O,toggleExpectedResult:X,handleAccordionChange:ee,setStepStatus:se,markAllSteps:oe,resetScenario:ue,exportTestResults:ce,getScenarioProgress:J,fetchScenarios:A,setNotification:t}=os({selectedOptions:n,onProgressUpdate:l}),s=k.useCallback(w=>{switch(w){case"pass":return a.palette.success.main;case"fail":return a.palette.error.main;case"blocked":return a.palette.warning.main;default:return a.palette.text.disabled}},[a.palette]),i=k.useCallback(()=>{c("/test-case-management")},[c]),g=k.useCallback(()=>{c("/printable-report",{state:{selectedOptions:n,stepStatuses:F,scenarios:h,progressData:W}})},[c,n,F,h,W]),m=k.useCallback(()=>e.jsxs(e.Fragment,{children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:2,borderBottom:`1px solid ${a.palette.divider}`,backgroundColor:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Ve,{color:"primary",sx:{mr:1}}),e.jsx(I,{variant:"subtitle1",fontWeight:"medium",children:"Test Instructions"})]}),e.jsx(d,{children:e.jsx(he,{onClick:O,edge:"end","aria-label":"close",size:"small",children:e.jsx(Je,{fontSize:"small"})})})]}),e.jsxs(d,{sx:{px:3,py:2,bgcolor:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":"rgba(0, 0, 0, 0.02)",borderBottom:`1px solid ${a.palette.divider}`},children:[e.jsxs(I,{variant:"subtitle1",fontWeight:"medium",children:[n.component," - ",n.brand]}),e.jsx(I,{variant:"body2",color:"text.secondary",sx:{mb:2},children:n.uscContext==="used"?"Used Cars":"Stock Cars"}),j&&e.jsxs(d,{sx:{mt:2,mb:1,backgroundColor:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.06)":"rgba(0, 0, 0, 0.03)",borderRadius:2,p:1.5,border:`1px solid ${a.palette.divider}`},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(I,{variant:"subtitle2",color:"text.primary",sx:{display:"flex",alignItems:"center",fontWeight:500},children:"Device Type"}),e.jsx(I,{variant:"caption",color:"text.secondary",sx:{fontStyle:"italic"},children:n.device==="mobile"?"Mobile test scenarios":"Desktop test scenarios"})]}),e.jsxs(mt,{value:n.device||"desktop",exclusive:!0,onChange:(w,v)=>{v!==null&&j&&(j("device",v),t(`Test scenarios for ${v} view`))},size:"small","aria-label":"device type",fullWidth:!0,sx:{".MuiToggleButtonGroup-grouped":{borderRadius:"8px !important",border:`1px solid ${a.palette.divider} !important`,m:.5,py:.75,flex:1,"&.Mui-selected":{backgroundColor:a.palette.mode==="dark"?"rgba(25, 118, 210, 0.3)":"rgba(25, 118, 210, 0.12)",color:a.palette.primary.main,fontWeight:"bold",boxShadow:a.palette.mode==="dark"?"0 0 8px rgba(25, 118, 210, 0.4)":"0 0 8px rgba(25, 118, 210, 0.2)","&:hover":{backgroundColor:a.palette.mode==="dark"?"rgba(25, 118, 210, 0.35)":"rgba(25, 118, 210, 0.15)"}},"&:hover":{backgroundColor:a.palette.mode==="dark"?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)",transition:"all 0.2s ease"},transition:"all 0.2s ease"}},children:[e.jsxs(Be,{value:"desktop","aria-label":"desktop view",children:[e.jsx(gt,{fontSize:"small",sx:{mr:1}}),e.jsx(I,{variant:"body2",children:"Desktop"})]}),e.jsxs(Be,{value:"mobile","aria-label":"mobile view",children:[e.jsx(bt,{fontSize:"small",sx:{mr:1}}),e.jsx(I,{variant:"body2",children:"Mobile"})]})]})]})]}),e.jsx(ps,{progressData:W,onExportResults:ce,onViewPrintableReport:g,hasScenarios:h.length>0}),e.jsx(d,{sx:{flexGrow:1,overflowY:"auto",overflowX:"hidden",height:"calc(100% - 240px)"},children:T?e.jsx(fs,{}):U?e.jsx(ms,{error:U,onRetry:A,onManageTestCases:i}):h.length===0?e.jsx(xs,{selectedOptions:n,onManageTestCases:i}):e.jsx(d,{sx:{pb:4},children:h.map(w=>{const v=J(w.id,w.steps),L=R===w.id;return e.jsx(us,{scenario:w,expanded:L,stepStatuses:F,showExpectedResults:x,onResetScenario:ue,onToggleAccordion:ee,onToggleExpected:X,onSetStatus:se,onMarkAllSteps:oe,getStatusColor:s,scenarioProgress:v},w.id)})})})]}),[a,R,T,U,h,n,W,F,x,ee,ue,O,ce,J,X,se,s,A,i,j,t]);return e.jsxs(e.Fragment,{children:[e.jsxs(Ze,{anchor:"right",variant:C?"temporary":"persistent",open:$,onClose:O,sx:{width:$?{xs:"100%",sm:420}:0,flexShrink:0,transition:a.transitions.create("width",{easing:a.transitions.easing.sharp,duration:a.transitions.duration.standard}),"& .MuiDrawer-paper":{width:{xs:"100%",sm:420},maxWidth:"100%",height:"100%",boxSizing:"border-box",position:C?"fixed":"relative",borderLeft:`1px solid ${a.palette.divider}`,display:"flex",flexDirection:"column",overflow:"hidden"}},PaperProps:{elevation:3},children:[m(),e.jsx(yt,{open:!!B,autoHideDuration:2e3,onClose:()=>t(null),anchorOrigin:{vertical:"bottom",horizontal:"center"},sx:{zIndex:1500},children:e.jsx(Le,{elevation:2,sx:{px:2,py:1,bgcolor:a.palette.background.paper,borderLeft:"4px solid",borderColor:"primary.main",display:"flex",alignItems:"center"},children:e.jsx(I,{variant:"body2",children:B})})})]}),!$&&e.jsx(ae,{title:"Show Test Instructions",children:e.jsx(jt,{color:"primary","aria-label":"test instructions",onClick:O,size:"medium",sx:{position:"fixed",bottom:16,right:16,zIndex:1e3},children:e.jsx(vt,{badgeContent:W.completion+"%",color:W.failed>0?"error":"success",sx:{"& .MuiBadge-badge":{fontSize:"0.65rem",fontWeight:"bold",minWidth:"32px",height:"20px",padding:"0 4px"}},children:e.jsx(kt,{})})})})]})},bs=({countryLanguageCode:n,goToNextCountry:l,goToPreviousCountry:j,changeCountry:a})=>{const[c,C]=k.useState(!1),[R,F]=k.useState(null),x=de(),h=Y[n]||{pretty:"Unknown",nmsc:"Unknown"},{pretty:T,nmsc:$}=h,U=Ut(),B=()=>{C(!c),c||F($)},W=O=>{F(O.target.value)};return e.jsxs(Le,{elevation:1,sx:{p:2,backgroundColor:"background.paper",borderRadius:2,transition:x.transitions.create(["background-color","box-shadow"])},children:[e.jsxs(xe,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[e.jsx(wt,{color:"primary",fontSize:"small"}),e.jsx(I,{variant:"subtitle2",color:"primary",fontWeight:"medium",sx:{flex:1},children:"Country Selection"}),e.jsx(he,{size:"small",onClick:B,children:c?e.jsx(Ct,{fontSize:"small"}):e.jsx(Ge,{fontSize:"small"})})]}),e.jsx(Oe,{sx:{mb:1.5}}),e.jsxs(d,{sx:{display:"flex",alignItems:"center",mb:c?2:0,backgroundColor:x.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":x.palette.grey[50],p:1,borderRadius:1,border:`1px solid ${x.palette.divider}`,transition:x.transitions.create(["background-color","border-color"])},children:[e.jsx(ae,{title:"Previous Country",children:e.jsx(he,{onClick:j,size:"small",color:"primary",children:e.jsx(et,{fontSize:"small"})})}),e.jsxs(I,{variant:"body2",sx:{flex:1,textAlign:"center",fontWeight:500,color:"text.primary"},children:[T," (",n,")"]}),e.jsx(ae,{title:"Next Country",children:e.jsx(he,{onClick:l,size:"small",color:"primary",children:e.jsx(Je,{fontSize:"small"})})})]}),e.jsx(Ke,{in:c,children:e.jsx(St,{in:c,children:e.jsxs(d,{sx:{mt:2},children:[e.jsxs(ve,{fullWidth:!0,size:"small",sx:{mb:2},children:[e.jsx(ke,{id:"nmsc-select-label",children:"Select NMSC"}),e.jsx(we,{labelId:"nmsc-select-label",id:"nmsc-select",value:R||"",label:"Select NMSC",onChange:W,sx:{bgcolor:"background.paper"},children:Object.keys(U).map(O=>e.jsx(ie,{value:O,children:O},O))})]}),R&&e.jsx(d,{sx:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:1,maxHeight:"200px",overflowY:"auto",p:1.5,backgroundColor:x.palette.mode==="dark"?"rgba(255, 255, 255, 0.05)":x.palette.grey[50],borderRadius:1,transition:x.transitions.create("background-color"),border:`1px solid ${x.palette.divider}`},children:U[R].map(O=>{var X;return e.jsx(fe,{variant:O===n?"contained":"outlined",size:"small",onClick:()=>a(O),sx:{minHeight:"32px",fontSize:"0.75rem",textTransform:"none"},children:((X=Y[O])==null?void 0:X.pretty)||O},O)})})]})})})]})},ys=({selectedOptions:n,handleOptionChange:l,countryLanguageCode:j})=>{const a=de(),c=Y[j]||{},C=c.hasLexus||!1,R=c.hasStock||!1,F=c.hasUsed!==!1,x=h=>{const T=h.target.name,$=h.target.value;l(T,$)};return e.jsxs(Le,{elevation:1,sx:{p:2,backgroundColor:"background.paper",borderRadius:2,transition:a.transitions.create(["background-color","box-shadow"])},children:[e.jsxs(xe,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[e.jsx(_t,{color:"primary",fontSize:"small"}),e.jsx(I,{variant:"subtitle2",color:"primary",fontWeight:"medium",sx:{flex:1},children:"Component Settings"})]}),e.jsx(Oe,{sx:{mb:1.5}}),e.jsxs(xe,{spacing:2,children:[e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"environment-label",children:"Environment"}),e.jsxs(we,{labelId:"environment-label",id:"environment",name:"environment",value:n.environment,label:"Environment",onChange:x,sx:{bgcolor:"background.paper"},children:[e.jsx(ie,{value:"localhost",children:"Localhost"}),e.jsx(ie,{value:"dev",children:"Development"}),e.jsx(ie,{value:"acc",children:"Acceptance"}),e.jsx(ie,{value:"prev",children:"Preview"}),e.jsx(ie,{value:"prod",children:"Production"})]}),e.jsx(Ce,{children:"Select the deployment environment"})]}),e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"component-label",children:"Component"}),e.jsx(we,{labelId:"component-label",id:"component",name:"component",value:n.component,label:"Component",onChange:x,sx:{bgcolor:"background.paper"},children:Object.entries(Dt).map(([h,{title:T,description:$}])=>e.jsxs(ie,{value:h,sx:{display:"flex",flexDirection:"column",alignItems:"flex-start"},children:[T,e.jsx(d,{sx:{fontSize:"0.8em",color:"text.secondary"},children:$})]},h))}),e.jsx(Ce,{children:"Select the component to test"})]}),e.jsxs(xe,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"usc-context-label",children:"USC Context"}),e.jsxs(we,{labelId:"usc-context-label",id:"uscContext",name:"uscContext",value:n.uscContext,label:"USC Context",onChange:x,disabled:n.component==="used-stock-cars-pdf",sx:{bgcolor:"background.paper"},children:[e.jsxs(ie,{value:"used",disabled:!F,children:["Used ",!F&&"(Not Available)"]}),e.jsxs(ie,{value:"stock",disabled:!R,children:["Stock ",!R&&"(Not Available)"]})]}),e.jsx(Ce,{children:!R&&n.uscContext==="used"?"Stock is not available for this country":!F&&n.uscContext==="stock"?"Used is not available for this country":"Used or Stock cars"})]}),e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"usc-env-label",children:"USC Environment"}),e.jsxs(we,{labelId:"usc-env-label",id:"uscEnv",name:"uscEnv",value:n.uscEnv,label:"USC Environment",onChange:x,sx:{bgcolor:"background.paper"},children:[e.jsx(ie,{value:"uat",children:"UAT"}),e.jsx(ie,{value:"production",children:"Production"})]}),e.jsx(Ce,{children:"Backend environment"})]})]}),e.jsxs(xe,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"brand-label",children:"Brand"}),e.jsxs(we,{labelId:"brand-label",id:"brand",name:"brand",value:n.brand,label:"Brand",onChange:x,sx:{bgcolor:"background.paper"},children:[e.jsx(ie,{value:"toyota",children:"Toyota"}),e.jsxs(ie,{value:"lexus",disabled:!C,children:["Lexus ",!C&&"(Not Available)"]})]}),e.jsx(Ce,{children:!C&&n.brand==="toyota"?"Lexus is not available for this country":"Brand selection"})]}),e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"variant-brand-label",children:"Variant Brand"}),e.jsxs(we,{labelId:"variant-brand-label",id:"variantBrand",name:"variantBrand",value:n.variantBrand,label:"Variant Brand",onChange:x,sx:{bgcolor:"background.paper"},children:[e.jsx(ie,{value:"toyota",children:"Toyota"}),e.jsx(ie,{value:"lexus",children:"Lexus"})]}),e.jsx(Ce,{children:"Variant brand for the component"})]})]}),e.jsx(xe,{direction:"row",spacing:2,sx:{mt:1},children:e.jsxs(ve,{fullWidth:!0,size:"small",children:[e.jsx(ke,{id:"retailerscreen-label",children:"Retailer Screen"}),e.jsxs(we,{labelId:"retailerscreen-label",id:"retailerscreen",name:"retailerscreen",value:n.retailerscreen||"false",label:"Retailer Screen",onChange:x,sx:{bgcolor:"background.paper"},children:[e.jsx(ie,{value:"true",children:"Enabled"}),e.jsx(ie,{value:"false",children:"Disabled"})]}),e.jsx(Ce,{children:"Enable or disable retailer screen mode"})]})})]})]})},js=({progressData:n})=>{const l=de();return e.jsxs(d,{sx:{width:"100%",p:2,borderTop:`1px solid ${l.palette.divider}`,backgroundColor:l.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1},children:[e.jsx(I,{variant:"subtitle2",children:"Test Progress"}),e.jsxs(I,{variant:"body2",fontWeight:"medium",children:[n.completion,"% Complete"]})]}),e.jsxs(d,{sx:{height:8,width:"100%",bgcolor:l.palette.grey[200],borderRadius:1,overflow:"hidden",display:"flex"},children:[n.passed>0&&e.jsx(ae,{title:`${n.passed} Passed`,children:e.jsx(d,{sx:{height:"100%",width:`${n.passed/n.total*100}%`,bgcolor:l.palette.success.main}})}),n.failed>0&&e.jsx(ae,{title:`${n.failed} Failed`,children:e.jsx(d,{sx:{height:"100%",width:`${n.failed/n.total*100}%`,bgcolor:l.palette.error.main}})}),n.blocked>0&&e.jsx(ae,{title:`${n.blocked} Blocked`,children:e.jsx(d,{sx:{height:"100%",width:`${n.blocked/n.total*100}%`,bgcolor:l.palette.warning.main}})})]}),e.jsxs(d,{sx:{display:"flex",mt:1,justifyContent:"space-between"},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:l.palette.success.main,mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.passed," Passed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:l.palette.error.main,mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.failed," Failed"]})]}),e.jsxs(d,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(d,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:l.palette.warning.main,mr:.5}}),e.jsxs(I,{variant:"caption",color:"text.secondary",children:[n.blocked," Blocked"]})]})]})]})},vs=({open:n,onClose:l,themeMode:j,onToggleTheme:a,selectedOptions:c,countryLanguageCode:C,onNextCountry:R,onPrevCountry:F,onChangeCountry:x,onOptionChange:h,progressData:T,urlDisplayComponent:$,frameInfoComponent:U})=>{const B=de(),W=Xe(B.breakpoints.down("md")),O=W?"100%":340;return e.jsxs(Ze,{variant:W?"temporary":"persistent",open:n,sx:{width:n?O:0,flexShrink:0,transition:B.transitions.create("width",{easing:B.transitions.easing.sharp,duration:B.transitions.duration.standard}),"& .MuiDrawer-paper":{width:O,boxSizing:"border-box",position:W?"fixed":"relative",borderRight:`1px solid ${B.palette.divider}`,display:"flex",flexDirection:"column"}},children:[e.jsxs(d,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${B.palette.divider}`,backgroundColor:B.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsxs(xe,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(Rt,{color:"primary",fontSize:"small"}),e.jsx(I,{variant:"subtitle1",color:"primary",fontWeight:"medium",children:"Configuration"})]}),e.jsxs(xe,{direction:"row",spacing:1,children:[e.jsx(ae,{title:`Switch to ${j==="light"?"dark":"light"} mode`,children:e.jsx(he,{size:"small",onClick:a,sx:{mr:.5},children:j==="light"?e.jsx(Et,{fontSize:"small"}):e.jsx(It,{fontSize:"small"})})}),e.jsx(he,{size:"small",onClick:l,children:e.jsx(et,{fontSize:"small"})})]})]}),e.jsxs(d,{sx:{p:2,overflowY:"auto",height:"100%",display:"flex",flexDirection:"column",gap:2},children:[$,U,e.jsx(bs,{countryLanguageCode:C,goToNextCountry:R,goToPreviousCountry:F,changeCountry:x}),e.jsx(ys,{selectedOptions:c,handleOptionChange:h,countryLanguageCode:C})]}),T&&T.total>0&&e.jsx(js,{progressData:T})]})},ks=({url:n,onCopy:l})=>{const j=de(),[a,c]=k.useState(!1);return e.jsxs(Le,{elevation:1,sx:{p:2,backgroundColor:"background.paper",borderRadius:2,transition:j.transitions.create(["background-color","box-shadow"])},children:[e.jsxs(d,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(I,{variant:"subtitle2",color:"primary",children:"Generated URL"}),e.jsx(ae,{title:"Copy URL",children:e.jsx(he,{onClick:l,color:"primary",size:"small",sx:{transition:j.transitions.create("transform"),"&:hover":{transform:"scale(1.1)"}},children:e.jsx(zt,{fontSize:"small"})})})]}),e.jsx(Oe,{sx:{mb:1}}),e.jsx(d,{onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),sx:{position:"relative",borderRadius:1,overflow:"hidden",transition:"all 0.25s ease","&:hover":{transform:"translateY(-2px)",boxShadow:j.shadows[2]}},children:e.jsxs(d,{sx:{height:a?"auto":"40px",backgroundColor:j.palette.mode==="dark"?Ne(j.palette.background.paper,.2):j.palette.grey[100],p:1.5,borderRadius:1,transition:j.transitions.create(["background-color","height"],{duration:"0.3s",easing:j.transitions.easing.easeInOut}),"&:hover":{backgroundColor:j.palette.mode==="dark"?Ne(j.palette.background.paper,.3):j.palette.grey[200]}},children:[e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",opacity:a?0:1,height:a?0:"24px",overflow:"hidden",transition:"all 0.2s ease-in-out"},children:[e.jsx(I,{variant:"caption",sx:{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"90%"},children:n}),e.jsx(Tt,{fontSize:"small",color:"action",sx:{opacity:.6,ml:1}})]}),e.jsx(Gt.div,{initial:!1,animate:{opacity:a?1:0,height:a?"auto":0},transition:{duration:.25,ease:"easeInOut"},style:{overflow:"hidden",transformOrigin:"top"},children:e.jsx(I,{variant:"caption",sx:{fontFamily:"monospace",display:"block",width:"100%",wordBreak:"break-all",pt:a?.5:0},children:n})})]})})]})},ws=({isResponsiveMode:n,width:l,height:j,deviceName:a,onToggleResponsiveMode:c,onRotate:C,onOpenSizeMenu:R})=>{const F=de();return e.jsxs(d,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"40px",px:2,borderBottom:`1px solid ${F.palette.divider}`,backgroundColor:F.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsx(xe,{direction:"row",spacing:1,alignItems:"center",children:n?e.jsxs(e.Fragment,{children:[e.jsx(We,{color:"primary",fontSize:"small"}),e.jsx(I,{variant:"subtitle2",color:"primary",children:"Responsive Mode"}),e.jsx(Lt,{label:`${Math.round(l)}×${Math.round(j)}`,size:"small",color:"primary",variant:"outlined",sx:{height:"22px",ml:1,fontSize:"0.7rem",fontFamily:"monospace"}}),a&&e.jsx(I,{variant:"caption",color:"text.secondary",sx:{ml:1},children:a})]}):e.jsxs(e.Fragment,{children:[e.jsx(He,{fontSize:"small"}),e.jsx(I,{variant:"subtitle2",children:"Full Size"})]})}),e.jsxs(xe,{direction:"row",spacing:.5,children:[n&&R&&e.jsx(ae,{title:"Change device size",children:e.jsx(he,{size:"small",onClick:R,children:e.jsx(We,{fontSize:"small"})})}),n&&C&&e.jsx(ae,{title:"Rotate dimensions",children:e.jsx(he,{size:"small",onClick:C,children:e.jsx(Mt,{fontSize:"small"})})}),e.jsx(ae,{title:n?"Exit responsive mode":"Enter responsive mode",children:e.jsx(he,{size:"small",color:n?"primary":"default",onClick:c,children:e.jsx(He,{fontSize:"small"})})})]})]})},tt=k.memo(({url:n,isResponsiveMode:l,isLoading:j,width:a,height:c,isResizing:C,onResize:R,onIframeLoad:F,loadingMessage:x="Loading preview...",placeholderContent:h,children:T})=>{const $=de();return e.jsx(d,{sx:{flex:1,position:"relative",overflow:"auto",display:"flex",justifyContent:"center",alignItems:"flex-start",p:l?4:0,backgroundColor:l?$.palette.mode==="dark"?"#121212":"#f5f5f5":"transparent"},children:e.jsxs(d,{sx:{position:"relative",width:l?a:"100%",height:l?c:"100%",boxShadow:l?$.shadows[4]:"none",overflow:"hidden",transition:C?"none":$.transitions.create(["width","height","box-shadow"],{duration:200}),border:l?`1px solid ${$.palette.divider}`:"none"},children:[e.jsx(Xt,{children:j&&e.jsx(Qt,{message:x})}),n?e.jsx("iframe",{src:n,style:{border:"none",width:"100%",height:"100%",display:"block",backgroundColor:$.palette.mode==="dark"?"#1E1E1E":"#FFFFFF"},onLoad:F,title:"Component Preview"}):e.jsx(d,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:$.palette.text.secondary},children:h||e.jsx(I,{variant:"body2",children:"Please select options to view the preview."})}),l&&e.jsx(Cs,{onResize:R}),T]})})}),Cs=({onResize:n})=>{const l=de(),j={position:"absolute",width:20,height:20,zIndex:100,display:"flex",justifyContent:"center",alignItems:"center",transition:"background-color 0.2s ease"},a={width:10,height:10,borderRadius:"50%",backgroundColor:"currentColor",transition:"transform 0.2s ease, box-shadow 0.2s ease",boxShadow:"0 0 0 2px rgba(255, 255, 255, 0.5), 0 0 0 1px rgba(0, 0, 0, 0.2)","&:hover":{transform:"scale(1.5)",boxShadow:"0 0 0 2px rgba(255, 255, 255, 0.8), 0 0 0 1px rgba(0, 0, 0, 0.5)"}},C={color:l.palette.mode==="dark"?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.5)","&::before":{content:'""',position:"absolute",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",zIndex:-1},"&:hover":{color:l.palette.primary.main,"&::before":{backgroundColor:"rgba(255, 255, 255, 0.3)"}}};return e.jsxs(e.Fragment,{children:[e.jsx(d,{sx:{...j,top:"50%",right:0,transform:"translateY(-50%)",cursor:"ew-resize",...C},onMouseDown:R=>n(R,"e"),children:e.jsx(d,{sx:a})}),e.jsx(d,{sx:{...j,bottom:0,left:"50%",transform:"translateX(-50%)",cursor:"ns-resize",...C},onMouseDown:R=>n(R,"s"),children:e.jsx(d,{sx:a})}),e.jsx(d,{sx:{...j,bottom:0,right:0,cursor:"nwse-resize",...C},onMouseDown:R=>n(R,"se"),children:e.jsx(d,{sx:a})})]})};tt.displayName="ResponsiveFrameContainer";const Ls=()=>{var L,E;const n=de(),{mode:l,toggleTheme:j}=Vt(),[a,c]=k.useState({total:0,passed:0,failed:0,blocked:0,notTested:0,completion:0}),[C,R]=k.useState(null),{selectedOptions:F,countryLanguageCode:x,generatedUrl:h,notification:T,iframeLoading:$,sidebarOpen:U,frameDimensions:B,isResizing:W,handleOptionChange:O,goToNextCountry:X,goToPreviousCountry:ee,changeCountry:se,copyUrlToClipboard:oe,handleIframeLoad:ue,toggleSidebar:ce,toggleResponsiveMode:J,handleResize:A,changeDeviceSize:t,rotateDimensions:s}=Jt(),i=k.useCallback(y=>{c(y)},[]),g=k.useCallback(y=>{R(y.currentTarget)},[]),m=k.useCallback(()=>{R(null)},[]),w=h?e.jsx(ks,{url:h,onCopy:oe}):null,v=h?e.jsxs(d,{sx:{p:2,backgroundColor:"background.paper",borderRadius:2,boxShadow:1},children:[e.jsx(I,{variant:"subtitle2",color:"primary",sx:{mb:1},children:"Current Preview"}),e.jsx(d,{sx:{py:.5},children:e.jsx(Kt,{selectedOptions:F,countryLanguageCode:x,maxWidth:280,wrapText:!0})})]}):null;return e.jsxs(d,{sx:{display:"flex",height:"100%",overflow:"hidden"},children:[e.jsx(vs,{open:U,onClose:ce,themeMode:l,onToggleTheme:j,selectedOptions:F,countryLanguageCode:x,onNextCountry:X,onPrevCountry:ee,onChangeCountry:se,onOptionChange:O,progressData:a,urlDisplayComponent:w,frameInfoComponent:v}),e.jsxs(d,{component:"main",sx:{flexGrow:1,display:"flex",flexDirection:"column",height:"100%",width:"100%",overflow:"hidden",position:"relative",bgcolor:"background.default",transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),...U&&{transition:n.transitions.create(["width","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.enteringScreen})}},children:[!U&&e.jsxs(d,{sx:{display:"flex",alignItems:"center",height:"48px",px:1,borderBottom:`1px solid ${n.palette.divider}`,backgroundColor:n.palette.mode==="dark"?"rgba(66, 66, 66, 0.2)":"rgba(248, 248, 248, 0.8)"},children:[e.jsx(he,{onClick:ce,size:"small",sx:{mr:1},children:e.jsx(Ft,{fontSize:"small"})}),e.jsx(I,{variant:"subtitle2",sx:{flex:1},children:((L=Y[x])==null?void 0:L.pretty)||"Unknown Country"})]}),e.jsxs(d,{sx:{flex:1,position:"relative",overflow:"hidden",width:"100%",height:U?"100%":"calc(100% - 48px)",display:"flex",flexDirection:"column",transition:n.transitions.create(["width","height","margin"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.standard})},children:[e.jsx(ws,{isResponsiveMode:B.isResponsiveMode,width:B.width,height:B.height,deviceName:B.deviceName,onToggleResponsiveMode:J,onRotate:s,onOpenSizeMenu:g}),e.jsx(tt,{url:h,isResponsiveMode:B.isResponsiveMode,isLoading:$,width:B.width,height:B.height,isResizing:W,onResize:A,onIframeLoad:ue,loadingMessage:`Loading ${((E=Y[x])==null?void 0:E.pretty)||"Preview"}...`,placeholderContent:e.jsx(I,{variant:"body2",children:"Please select a component and country to view the preview."})})]})]}),e.jsx(gs,{selectedOptions:F,onProgressUpdate:i,handleOptionChange:O}),e.jsx(Ht,{message:T,open:!!T,autoHideDuration:3e3}),e.jsx(qt,{anchorEl:C,currentWidth:B.width,onClose:m,onSelect:t})]})};export{Ls as default};
